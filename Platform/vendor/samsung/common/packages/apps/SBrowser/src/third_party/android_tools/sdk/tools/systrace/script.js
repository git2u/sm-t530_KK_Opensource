window.FLATTENED={};window.FLATTENED.base=!0;window.FLATTENED.event_target=!0;window.FLATTENED.measuring_stick=!0;window.FLATTENED.timeline_filter=!0;window.FLATTENED.range=!0;window.FLATTENED.timeline_selection=!0;window.FLATTENED.timeline_viewport=!0;window.FLATTENED.ui=!0;window.FLATTENED["tracks.timeline_track"]=!0;window.FLATTENED["tracks.timeline_container_track"]=!0;window.FLATTENED.fast_rect_renderer=!0;window.FLATTENED.timeline_color_scheme=!0;
window.FLATTENED["tracks.timeline_canvas_based_track"]=!0;window.FLATTENED.sorted_array_utils=!0;window.FLATTENED["tracks.timeline_slice_track"]=!0;window.FLATTENED.timeline_guid=!0;window.FLATTENED.timeline_slice=!0;window.FLATTENED.timeline_slice_group=!0;window.FLATTENED.timeline_async_slice_group=!0;window.FLATTENED.timeline_sample=!0;window.FLATTENED.timeline_thread=!0;window.FLATTENED.timeline_counter=!0;window.FLATTENED.timeline_process_base=!0;window.FLATTENED.timeline_process=!0;
window.FLATTENED.timeline_kernel=!0;window.FLATTENED.timeline_cpu=!0;window.FLATTENED.timeline_model=!0;window.FLATTENED["tracks.timeline_cpu_track"]=!0;window.FLATTENED["tracks.timeline_counter_track"]=!0;window.FLATTENED["tracks.timeline_slice_group_track"]=!0;window.FLATTENED["tracks.timeline_async_slice_group_track"]=!0;window.FLATTENED["tracks.timeline_thread_track"]=!0;window.FLATTENED["tracks.timeline_process_track"]=!0;window.FLATTENED["tracks.timeline_model_track"]=!0;
window.FLATTENED["tracks.timeline_viewport_track"]=!0;window.FLATTENED.timeline=!0;window.FLATTENED.timeline_analysis=!0;window.FLATTENED.overlay=!0;window.FLATTENED.timeline_category_filter_dialog=!0;window.FLATTENED.timeline_find_control=!0;window.FLATTENED["importer.trace_event_importer"]=!0;window.FLATTENED["importer.linux_perf.parser"]=!0;window.FLATTENED["importer.linux_perf.bus_parser"]=!0;window.FLATTENED["importer.linux_perf.clock_parser"]=!0;
window.FLATTENED["importer.linux_perf.cpufreq_parser"]=!0;window.FLATTENED["importer.linux_perf.drm_parser"]=!0;window.FLATTENED["importer.linux_perf.exynos_parser"]=!0;window.FLATTENED["importer.linux_perf.gesture_parser"]=!0;window.FLATTENED["importer.linux_perf.i915_parser"]=!0;window.FLATTENED["importer.linux_perf.mali_parser"]=!0;window.FLATTENED["importer.linux_perf.power_parser"]=!0;window.FLATTENED["importer.linux_perf.sched_parser"]=!0;
window.FLATTENED["importer.linux_perf.workqueue_parser"]=!0;window.FLATTENED["importer.linux_perf.android_parser"]=!0;window.FLATTENED["importer.linux_perf_importer"]=!0;window.FLATTENED.settings=!0;window.FLATTENED.timeline_view=!0;"use strict";var global=this;
this.base=function(){function d(b){"/"==b[b.length-1]&&(b=b.substring(0,b.length-1));q=b}function c(b,a){r[b]||(r[b]=[]);for(var e=r[b],g=!1,f=0;f<e.length;f++)e[f]==a&&(g=!0);g||e.push(a)}function a(b,a){s[b]||(s[b]=[]);for(var e=s[b],g=!1,f=0;f<s.length;f++)e[f]==a&&(g=!0);g||e.push(a)}function b(b,a){t[b]||(t[b]=[]);for(var e=t[b],g=!1,f=0;f<e.length;f++)e[f]==a&&(g=!0);g||e.push(a)}function e(){if(!p){p=!0;var e=new XMLHttpRequest,g=q+"/deps.js";e.open("GET",g,!1);e.send(null);if(200!=e.status)throw Error("Could not find "+
g+". Run calcdeps.py and try again.");base.addModuleDependency=c;base.addModuleRawScriptDependency=a;base.addModuleStylesheet=b;try{eval(e.responseText)}catch(f){throw Error("When loading deps, got "+f.stack?f.stack:f);}delete base.addModuleStylesheet;delete base.addModuleRawScriptDependency;delete base.addModuleDependency}}function f(b,a){var c=a||0;if(window.FLATTENED){if(!window.FLATTENED[b])throw Error("Somehow, module "+b+" didn't get stored in the flattened js file! You may need to rerun build/calcdeps.py");
}else if(e(),"APPENDED"!=u[b]){if("RESOLVING"==u[b])throw Error("Circular dependency betwen modules. Cannot continue!");u[b]="RESOLVING";for(var k=t[b]||[],j=0;j<k.length;j++)g(k[j]);k=s[b]||[];for(j=0;j<k.length;j++){var h=k[j];if(!v[h]){var d=q+"/"+h,d='<script type="text/javascript" src="'+d+'">\x3c/script>';base.doc.write(d);v[h]="APPENDED"}}k=r[b]||[];for(j=0;j<k.length;j++)f(k[j],c+1);c=b.replace(/\./g,"/")+".js";d=q+"/"+c;base.doc.write('<script type="text/javascript" src="'+d+'">\x3c/script>');
u[b]="APPENDED"}}function g(b){if(!window.FLATTENED&&!x[b]){x[b]=!0;b=b.replace(/\./g,"/")+".css";b=q+"/"+b;var a=document.createElement("link");a.setAttribute("rel","stylesheet");a.setAttribute("href",b);base.doc.head.appendChild(a)}}function k(b,a,e,g){var f=new base.Event(a+"Change");f.propertyName=a;f.newValue=e;f.oldValue=g;b.dispatchEvent(f)}function h(b){return b.replace(/([A-Z])/g,"-$1").toLowerCase()}function j(b,a){switch(a){case y.JS:var e=b+"_";return function(){return this[e]};case y.ATTR:var g=
h(b);return function(){return this.getAttribute(g)};case y.BOOL_ATTR:return g=h(b),function(){return this.hasAttribute(g)}}}function l(b,a,e){switch(a){case y.JS:var g=b+"_";return function(a){var f=this[g];a!==f&&(this[g]=a,e&&e.call(this,a,f),k(this,b,a,f))};case y.ATTR:var f=h(b);return function(a){var g=this[f];a!==g&&(void 0==a?this.removeAttribute(f):this.setAttribute(f,a),e&&e.call(this,a,g),k(this,b,a,g))};case y.BOOL_ATTR:return f=h(b),function(a){var g=this[f];a!==g&&(a?this.setAttribute(f,
b):this.removeAttribute(f),e&&e.call(this,a,g),k(this,b,a,g))}}}function w(b,a,e){var g=base.doc.createEvent("Event");g.initEvent(b,!!a,!!e);g.__proto__=global.Event.prototype;return g}function m(){this.types=[];this.values=[]}var q=".",p=!1,r={},t={},s={},u={},v={},x={},y={JS:"js",ATTR:"attr",BOOL_ATTR:"boolAttr"},z=1;m.prototype={__proto__:Object.prototype,add:function(b,a){this.types.push(b);this.values.push(a)},get:function(b){for(var a=0;a<this.types.length;a++)if(b instanceof this.types[a])return this.values[a]}};
return{set moduleBasePath(b){d(b)},get moduleBasePath(){return q},require:f,requireStylesheet:g,requireRawScript:function(b){if(window.FLATTENED_RAW_SCRIPTS){if(!window.FLATTENED_RAW_SCRIPTS[b])throw Error("Somehow, "+b+" didn't get stored in the flattened js file! You may need to rerun build/calcdeps.py");}else if(!v[b])throw Error(b+" should already have been loaded. Did you forget to run calcdeps.py?");},exportTo:function(b,a){var e;e=b.split(".");for(var g=global,f;e.length&&(f=e.shift());)g=
f in g?g[f]:g[f]={};e=g;try{var c=a()}catch(k){console.log("While running exports for ",name,":");console.log(k.stack||k);return}for(var j in c)(g=Object.getOwnPropertyDescriptor(c,j))&&Object.defineProperty(e,j,g)},addSingletonGetter:function(b){b.getInstance=function(){return b.instance_||(b.instance_=new b)}},createUid:function(){return z++},defineProperty:function(b,a,e,g){"function"==typeof b&&(b=b.prototype);e=e||y.JS;b.__lookupGetter__(a)||b.__defineGetter__(a,j(a,e));b.__lookupSetter__(a)||
b.__defineSetter__(a,l(a,e,g))},dispatchPropertyChange:k,dispatchSimpleEvent:function(b,a,e,g){a=new base.Event(a,e,g);return b.dispatchEvent(a)},Event:w,getUid:function(b){return b.hasOwnProperty("uid")?b.uid:b.uid=z++},initialize:function(){if(global.document)w.prototype={__proto__:global.Event.prototype},base.doc=document,base.isMac=/Mac/.test(navigator.platform),base.isWindows=/Win/.test(navigator.platform),base.isChromeOS=/CrOS/.test(navigator.userAgent),base.isLinux=/Linux/.test(navigator.userAgent),
base.isGTK=/GTK/.test(chrome.toolkit),base.isViews=/views/.test(chrome.toolkit),d("/src");else{var b=cr;Object.defineProperty(global,"cr",{get:function(){Object.defineProperty(global,"cr",{value:b});originalBase.initialize();return b},configurable:!0})}},PropertyKind:y,asArray:function(b){for(var a=[],e=0;e<b.length;e++)a.push(b[e]);return a},concatenateArrays:function(){for(var b=[],a=0;a<arguments.length;a++){if(!(arguments[a]instanceof Array))throw Error("Arguments "+a+"is not an array");b.push.apply(b,
arguments[a])}return b},dictionaryKeys:function(b){var a=[],e;for(e in b)a.push(e);return a},dictionaryValues:function(b){var a=[],e;for(e in b)a.push(b[e]);return a},TypeMap:m}}();base.initialize();
base.exportTo("base",function(){function d(){}d.prototype={addEventListener:function(c,a){this.listeners_||(this.listeners_=Object.create(null));if(c in this.listeners_){var b=this.listeners_[c];0>b.indexOf(a)&&b.push(a)}else this.listeners_[c]=[a]},removeEventListener:function(c,a){if(this.listeners_&&c in this.listeners_){var b=this.listeners_[c],e=b.indexOf(a);0<=e&&(1==b.length?delete this.listeners_[c]:b.splice(e,1))}},dispatchEvent:function(c){if(!this.listeners_)return!0;var a=this;c.__defineGetter__("target",
function(){return a});c.preventDefault=function(){this.returnValue=!1};var b=c.type,e=0;if(b in this.listeners_)for(var b=this.listeners_[b].concat(),f=0,g;g=b[f];f++)e=g.handleEvent?e|!1===g.handleEvent.call(g,c):e|!1===g.call(this,c);return!e&&c.returnValue}};return{EventTarget:d}});
base.exportTo("tracing",function(){function d(){this.iframe_=void 0}d.prototype={__proto__:Object.prototype,measure:function(c){this.iframe_.contentDocument.body.appendChild(c);var a=this.iframe_.contentWindow.getComputedStyle(c),b=parseInt(a.width,10),a=parseInt(a.height,10);this.iframe_.contentDocument.body.removeChild(c);return{width:b,height:a}},attach:function(){var c=document.createElement("iframe");c.style.cssText="width:100%;height:0;border:0;visibility:hidden";document.body.appendChild(c);
this.iframe_=c;this.iframe_.contentDocument.body.style.cssText="padding:0;margin:0;overflow:hidden";for(var c=document.querySelectorAll("link[rel=stylesheet]"),a=0;a<c.length;a++){var b=c[a],e=this.iframe_.contentDocument.createElement("link");e.rel="stylesheet";e.href=b.href;this.iframe_.contentDocument.head.appendChild(e)}},detach:function(){document.body.removeChild(this.iframe_);this.iframe_=void 0}};return{MeasuringStick:d}});"use strict";
base.exportTo("tracing",function(){function d(){}function c(b){this.text_=b}function a(b){this.categories_={};b=b||[];for(var a=0;a<b.length;a++)this.addCategory(b[a])}d.prototype={__proto__:Object.prototype,matchCounter:function(){return!0},matchCpu:function(){return!0},matchProcess:function(){return!0},matchSlice:function(){return!0},matchThread:function(){return!0}};c.prototype={__proto__:d.prototype,matchCounter:function(b){return 0==this.text_.length||void 0===b.name?!1:-1!=b.name.indexOf(this.text_)},
matchSlice:function(b){return 0==this.text_.length||void 0===b.title?!1:-1!=b.title.indexOf(this.text_)}};a.prototype={__proto__:d.prototype,addCategory:function(b){this.categories_[b]=!0},matchCounter:function(b){return!b.category?!0:!this.categories_[b.category]},matchSlice:function(b){return!b.category?!0:!this.categories_[b.category]}};return{filterCounterArray:function(b,a){if(void 0===b)return a;for(var f=[],g=0;g<a.length;++g)b.matchCounter(a[g])&&f.push(a[g]);return f},filterSliceArray:function(b,
a){if(void 0===b)return a;for(var f=[],g=0;g<a.length;++g)b.matchSlice(a[g])&&f.push(a[g]);return f},TimelineFilter:d,TimelineTitleFilter:c,TimelineCategoryFilter:a}});"use strict";"use strict";
base.exportTo("base",function(){function d(){this.isEmpty_=!0;this.max_=this.min_=void 0}d.prototype={__proto__:Object.prototype,reset:function(){this.isEmpty_=!0;this.max_=this.min_=void 0},get isEmpty(){return this.isEmpty_},addRange:function(c){c.isEmpty||(this.addValue(c.min),this.addValue(c.max))},addValue:function(c){this.isEmpty_?(this.min_=this.max_=c,this.isEmpty_=!1):(this.max_=Math.max(this.max_,c),this.min_=Math.min(this.min_,c))},get min(){return this.isEmpty_?void 0:this.min_},get max(){return this.isEmpty_?
void 0:this.max_}};return{Range:d}});"use strict";base.require("range");base.require("event_target");
base.exportTo("tracing",function(){function d(b,a){this.track=b;this.slice=a}function c(b,a,f){this.track=b;this.counter=a;this.sampleIndex=f}function a(){this.bounds_dirty_=!0;this.bounds_=new base.Range;this.length_=0}d.prototype={get selected(){return this.slice.selected},set selected(b){this.slice.selected=b}};c.prototype={get selected(){return!0==this.track.selectedSamples[this.sampleIndex]},set selected(b){this.track.selectedSamples[this.sampleIndex]=b?!0:!1;this.track.invalidate()}};a.prototype=
{__proto__:Object.prototype,get bounds(){if(this.bounds_dirty_){this.bounds_.reset();for(var b=0;b<this.length_;b++){var a=this[b];a.slice&&(this.bounds_.addValue(a.slice.start),this.bounds_.addValue(a.slice.end))}this.bounds_dirty_=!1}return this.bounds_},get duration(){return this.bounds_.isEmpty?0:this.bounds_.max-this.bounds_.min},get length(){return this.length_},clear:function(){for(var b=0;b<this.length_;++b)delete this[b];this.length_=0;this.bounds_dirty_=!0},pushHit:function(b){this.push_(b)},
push_:function(b){this[this.length_++]=b;this.bounds_dirty_=!0;return b},addSlice:function(b,a){return this.push_(new d(b,a))},addCounterSample:function(b,a,f){return this.push_(new c(b,a,f))},subSelection:function(b,e){e=e||1;var f=new a;f.bounds_dirty_=!0;if(0>b||b+e>this.length_)throw Error("Index out of bounds");for(var g=b;g<b+e;g++)f.push_(this[g]);return f},getCounterSampleHitsAsSelection:function(){for(var b=new a,e=0;e<this.length_;e++)this[e]instanceof c&&b.push_(this[e]);return b},getSliceHitsAsSelection:function(){for(var b=
new a,e=0;e<this.length_;e++)this[e]instanceof d&&b.push_(this[e]);return b},getNumSliceHits:function(){for(var b=0,a=0;a<this.length_;a++)this[a]instanceof d&&b++;return b},getNumCounterHits:function(){for(var b=0,a=0;a<this.length_;a++)this[a]instanceof c&&b++;return b},map:function(b){for(var a=0;a<this.length_;a++)b(this[a])},getShiftedSelection:function(b){for(var e=new a,f=0;f<this.length_;f++){var g=this[f];g.track.addItemNearToProvidedHitToSelection(g,b,e)}return 0==e.length?void 0:e}};return{TimelineSelectionSliceHit:d,
TimelineSelectionCounterSampleHit:c,TimelineSelection:a}});"use strict";base.require("event_target");
base.exportTo("tracing",function(){function d(a){this.parentEl_=a;this.scaleX_=1;this.gridTimebase_=this.panX_=0;this.gridStep_=1E3/60;this.hasCalledSetupFunction_=this.gridEnabled_=!1;this.onResizeBoundToThis_=this.onResize_.bind(this);this.checkForAttachInterval_=setInterval(this.checkForAttach_.bind(this),250);this.markers=[]}function c(a,b){this.viewport_=a;this.positionWorld_=b;this.selected_=!1}d.prototype={__proto__:base.EventTarget.prototype,drawUnderContent:function(){},drawOverContent:function(a,
b,e,f){if(this.gridEnabled){var g=this.gridTimebase;for(a.beginPath();g<e;){if(g>=b){var c=this.xWorldToView(g);a.moveTo(c,0);a.lineTo(c,f)}g+=this.gridStep}a.strokeStyle="rgba(255,0,0,0.25)";a.stroke()}for(g=0;g<this.markers.length;++g)this.markers[g].drawLine(a,b,e,f,this)},setWhenPossible:function(a){this.pendingSetFunction_=a},get isAttachedToDocument_(){for(var a=this.parentEl_;a.parentNode;)a=a.parentNode;return a==this.parentEl_.ownerDocument},onResize_:function(){this.dispatchChangeEvent()},
checkForAttach_:function(){if(this.isAttachedToDocument_&&0!=this.clientWidth){this.iframe_||(this.iframe_=document.createElement("iframe"),this.iframe_.style.cssText="position:absolute;width:100%;height:0;border:0;visibility:hidden;",this.parentEl_.appendChild(this.iframe_),this.iframe_.contentWindow.addEventListener("resize",this.onResizeBoundToThis_));var a=this.clientWidth+"x"+this.clientHeight;if(this.pendingSetFunction_){this.lastSize_=a;try{this.pendingSetFunction_()}catch(b){console.log("While running setWhenPossible:",
b)}this.pendingSetFunction_=void 0}window.clearInterval(this.checkForAttachInterval_);this.checkForAttachInterval_=void 0}},dispatchChangeEvent:function(){base.dispatchSimpleEvent(this,"change")},dispatchMarkersChangeEvent_:function(){base.dispatchSimpleEvent(this,"markersChange")},detach:function(){this.checkForAttachInterval_&&(window.clearInterval(this.checkForAttachInterval_),this.checkForAttachInterval_=void 0);this.iframe_&&(this.iframe_.removeEventListener("resize",this.onResizeBoundToThis_),
this.parentEl_.removeChild(this.iframe_))},get scaleX(){return this.scaleX_},set scaleX(a){this.scaleX_!=a&&(this.scaleX_=a,this.dispatchChangeEvent())},get panX(){return this.panX_},set panX(a){this.panX_!=a&&(this.panX_=a,this.dispatchChangeEvent())},setPanAndScale:function(a,b){if(this.scaleX_!=b||this.panX_!=a)this.scaleX_=b,this.panX_=a,this.dispatchChangeEvent()},xWorldToView:function(a){return(a+this.panX_)*this.scaleX_},xWorldVectorToView:function(a){return a*this.scaleX_},xViewToWorld:function(a){return a/
this.scaleX_-this.panX_},xViewVectorToWorld:function(a){return a/this.scaleX_},xPanWorldPosToViewPos:function(a,b,e){if("string"==typeof b)if("left"==b)b=0;else if("center"==b)b=e/2;else if("right"==b)b=e-1;else throw Error("unrecognized string for viewPos. left|center|right");this.panX=b/this.scaleX_-a},xPanWorldBoundsIntoView:function(a,b,e){0>this.xWorldToView(a)?this.xPanWorldPosToViewPos(a,"left",e):this.xWorldToView(b)>e&&this.xPanWorldPosToViewPos(b,"right",e)},xSetWorldBounds:function(a,b,
e){this.setPanAndScale(-a,e/(b-a))},get gridEnabled(){return this.gridEnabled_},set gridEnabled(a){this.gridEnabled_!=a&&(this.gridEnabled_=a&&!0,this.dispatchChangeEvent())},get gridTimebase(){return this.gridTimebase_},set gridTimebase(a){this.gridTimebase_!=a&&(this.gridTimebase_=a,base.dispatchSimpleEvent(this,"change"))},get gridStep(){return this.gridStep_},applyTransformToCanvas:function(a){a.transform(this.scaleX_,0,0,1,this.panX_*this.scaleX_,0)},addMarker:function(a){a=new c(this,a);this.markers.push(a);
this.dispatchChangeEvent();this.dispatchMarkersChangeEvent_();return a},removeMarker:function(a){for(var b=0;b<this.markers.length;++b)if(this.markers[b]===a)return this.markers.splice(b,1),this.dispatchChangeEvent(),this.dispatchMarkersChangeEvent_(),!0},findMarkerNear:function(a,b){for(var e=this.xViewVectorToWorld(b),f=0;f<this.markers.length;++f)if(Math.abs(this.markers[f].positionWorld-a)<=e)return this.markers[f]}};c.prototype={get positionWorld(){return this.positionWorld_},set positionWorld(a){this.positionWorld_=
a;this.viewport_.dispatchChangeEvent()},set selected(a){this.selected_=a;this.viewport_.dispatchChangeEvent()},get selected(){return this.selected_},get color(){return this.selected?"rgb(255,0,0)":"rgb(0,0,0)"},drawTriangle_:function(a,b,e,f,g,c){a.beginPath();var h=this.positionWorld_;h>=b&&h<e&&(b=c.xWorldToView(h),a.moveTo(b,g),a.lineTo(b-3,g/2),a.lineTo(b+3,g/2),a.lineTo(b,g),a.closePath(),a.fillStyle=this.color,a.fill(),g!=f&&(a.beginPath(),a.moveTo(b,g),a.lineTo(b,f),a.closePath(),a.strokeStyle=
this.color,a.stroke()))},drawLine:function(a,b,e,f,g){a.beginPath();var c=this.positionWorld_;c>=b&&c<e&&(b=g.xWorldToView(c),a.moveTo(b,0),a.lineTo(b,f));a.strokeStyle=this.color;a.stroke()}};return{TimelineViewport:d,TimelineViewportMarker:c}});
base.exportTo("base.ui",function(){function d(c,a){return(a&&a.ownerDocument?a.ownerDocument:base.doc).createElement(c)}return{decorate:function(c,a){var b;b="string"==typeof c?base.doc.querySelectorAll(c):[c];for(var e=0,f;f=b[e];e++)f instanceof a||a.decorate(f)},define:function(c){function a(f){var g=b(e,f);a.decorate(g);for(var c in f)g[c]=f[c];return g}var b,e;"function"==typeof c?(b=c,e=""):(b=d,e=c);a.decorate=function(b){b.__proto__=a.prototype;b.decorate()};return a},limitInputWidth:function(c,
a,b){function e(){if(c.scrollWidth>d)c.style.width=d+"px";else{c.style.width=0;var a=c.scrollWidth;c.style.width=a<b?b+"px":a+"px"}}c.style.width="10px";var f=c.ownerDocument.defaultView,g=f.getComputedStyle(c),f=f.getComputedStyle(a),k="rtl"==g.direction,h=c.getBoundingClientRect(),j=a.getBoundingClientRect(),h=k?j.right-h.right:h.left-j.left,g=parseInt(g.borderLeftWidth,10)+parseInt(g.paddingLeft,10)+parseInt(g.paddingRight,10)+parseInt(g.borderRightWidth,10),f=k?parseInt(f.paddingLeft,10):parseInt(f.paddingRight,
10),d=a.clientWidth-h-g-f;c.addEventListener("input",e);e()},toCssPx:function(c){window.isFinite(c)||console.error("Pixel value is not a number: "+c);return Math.round(c)+"px"}}});base.requireStylesheet("tracks.timeline_track");base.require("ui");
base.exportTo("tracing.tracks",function(){var d=base.ui.define("div");d.prototype={__proto__:HTMLDivElement.prototype,decorate:function(){},get visible(){return"none"!==this.style.display},set visible(c){this.style.display=c?"":"none"},get numVisibleTracks(){return this.visible?1:0},addControlButtonElements_:function(c){var a=document.createElement("div");a.classList.add("timeline-track-button");a.classList.add("timeline-track-close-button");a.textContent=String.fromCharCode(215);var b=this;a.addEventListener("click",
function(){b.style.display="None"});this.appendChild(a);var e=document.createElement("div");e.classList.add("timeline-track-button");e.classList.add("timeline-track-collapse-button");e.textContent="\u2212";var f=!1;e.addEventListener("click",function(){f=!f;this.collapsedDidChange(f);e.textContent=f?"+":"\u2212"});this.appendChild(e);c||(e.style.display="None")}};return{TimelineTrack:d}});"use strict";base.require("tracks.timeline_track");base.require("timeline_filter");base.require("ui");
base.exportTo("tracing.tracks",function(){var d=base.ui.define(tracing.tracks.TimelineTrack);d.prototype={__proto__:tracing.tracks.TimelineTrack.prototype,decorate:function(){this.categoryFilter_=new tracing.TimelineFilter;this.headingWidth_=void 0;this.tracks_=[]},detach:function(){this.detachAllChildren()},detachAllChildren:function(){for(var c=0;c<this.tracks_.length;c++)this.tracks_[c].detach();this.tracks_=[];this.textContent=""},get viewport(){return this.viewport_},set viewport(c){this.viewport_=
c;for(var a=0;a<this.tracks_.length;a++)this.tracks_[a].viewport=c},get firstCanvas(){for(var c=0;c<this.tracks_.length;c++)if(this.tracks_[c].visible)return this.tracks_[c].firstCanvas},get numVisibleTracks(){return!this.visible?0:this.numVisibleChildTracks},get numVisibleChildTracks(){for(var c=0,a=0;a<this.tracks_.length;++a)c+=this.tracks_[a].numVisibleTracks;return c},get headingWidth(){return this.headingWidth_},set headingWidth(c){this.headingWidth_=c;for(var a=0;a<this.tracks_.length;++a)this.tracks_[a].headingWidth=
c},get categoryFilter(){return this.categoryFilter_},set categoryFilter(c){this.categoryFilter_=c;for(var a=0;a<this.tracks_.length;++a)this.tracks_[a].categoryFilter=c;this.applyCategoryFilter_();this.updateFirstVisibleChildCSS()},applyCategoryFilter_:function(){},addTrack_:function(c){c.headingWidth=this.headingWidth_;c.viewport=this.viewport_;c.categoryFilter=this.categoryFilter;this.tracks_.push(c);this.appendChild(c);return c},updateFirstVisibleChildCSS:function(){for(var c=!0,a=0;a<this.tracks_.length;++a){var b=
this.tracks_[a];c&&b.visible?(b.classList.add("first-visible-child"),c=!1):b.classList.remove("first-visible-child")}},addIntersectingItemsToSelection:function(c,a,b){for(var e=0;e<this.tracks_.length;e++){var f=this.tracks_[e].getBoundingClientRect();a>=f.top&&a<f.bottom&&this.tracks_[e].addIntersectingItemsToSelection(c,a,b)}return!1},addIntersectingItemsInRangeToSelection:function(c,a,b,e,f){for(var g=0;g<this.tracks_.length;g++){var k=this.tracks_[g].getBoundingClientRect(),h=Math.max(b,k.top),
k=Math.min(e,k.bottom);h<=k&&this.tracks_[g].addIntersectingItemsInRangeToSelection(c,a,b,e,f)}},addAllObjectsMatchingFilterToSelection:function(c,a){for(var b=0;b<this.tracks_.length;b++)this.tracks_[b].addAllObjectsMatchingFilterToSelection(c,a)}};return{TimelineContainerTrack:d}});
base.exportTo("tracing",function(){function d(c,a,b,e){this.ctx_=c;this.minRectSize_=a;this.maxMergeDist_=b;this.pallette_=e}d.prototype={y_:0,h_:0,merging_:!1,mergeStartX_:0,mergeCurRight_:0,setYandH:function(c,a){this.flush();this.y_=c;this.h_=a},fillRect:function(c,a,b){var e=c+a;a<this.minRectSize_?(e-this.mergeStartX_>this.maxMergeDist_&&this.flush(),this.merging_?(this.mergeCurRight_=e,this.mergedColorId=Math.max(this.mergedColorId,b)):(this.merging_=!0,this.mergeStartX_=c,this.mergeCurRight_=
e,this.mergedColorId=b)):(this.merging_&&this.flush(),this.ctx_.fillStyle=this.pallette_[b],this.ctx_.fillRect(c,this.y_,a,this.h_))},flush:function(){this.merging_&&(this.ctx_.fillStyle=this.pallette_[this.mergedColorId],this.ctx_.fillRect(this.mergeStartX_,this.y_,this.mergeCurRight_-this.mergeStartX_,this.h_),this.merging_=!1)}};return{FastRectRenderer:d}});"use strict";
base.exportTo("tracing",function(){function d(b){for(var a=0,e=0;e<b.length;++e)a=(a+37*a+11*b.charCodeAt(e))%4294967295;return a}var c=[{r:138,g:113,b:152},{r:175,g:112,b:133},{r:127,g:135,b:225},{r:93,g:81,b:137},{r:116,g:143,b:119},{r:178,g:214,b:122},{r:87,g:109,b:147},{r:119,g:155,b:95},{r:114,g:180,b:160},{r:132,g:85,b:103},{r:157,g:210,b:150},{r:148,g:94,b:86},{r:164,g:108,b:138},{r:139,g:191,b:150},{r:110,g:99,b:145},{r:80,g:129,b:109},{r:125,g:140,b:149},{r:93,g:124,b:132},{r:140,g:85,b:140},
{r:104,g:163,b:162},{r:132,g:141,b:178},{r:131,g:105,b:147},{r:135,g:183,b:98},{r:152,g:134,b:177},{r:141,g:188,b:141},{r:133,g:160,b:210},{r:126,g:186,b:148},{r:112,g:198,b:205},{r:180,g:122,b:195},{r:203,g:144,b:152},{r:182,g:125,b:143},{r:126,g:200,b:148},{r:133,g:160,b:210},{r:240,g:240,b:240}],a=c.length-4,b=c.length,e=c.concat(c.map(function(b){var a;a=240<=b.r&&240<=b.g&&240<=b.b?-0.2:0.45;return{r:Math.min(255,b.r+Math.floor(b.r*a)),g:Math.min(255,b.g+Math.floor(b.g*a)),b:Math.min(255,b.b+
Math.floor(b.b*a))}})).map(function(b){return"rgb("+b.r+","+b.g+","+b.b+")"}),f={};return{getColorPalette:function(){return e},getColorPaletteHighlightIdBoost:function(){return b},getColorIdByName:function(b){if("iowait"==b)return a;if("running"==b)return a+1;if("runnable"==b)return a+2;if("sleeping"==b)return a+3;throw Error("Unrecognized color ")+b;},getStringHash:d,getStringColorId:function(b){if(void 0===f[b]){var e=d(b);f[b]=e%a}return f[b]}}});"use strict";base.requireStylesheet("tracks.timeline_canvas_based_track");
base.require("tracks.timeline_track");base.require("fast_rect_renderer");base.require("timeline_color_scheme");base.require("ui");
base.exportTo("tracing.tracks",function(){var d=base.ui.define(tracing.tracks.TimelineTrack);d.prototype={__proto__:tracing.tracks.TimelineTrack.prototype,decorate:function(){this.className="timeline-canvas-based-track";this.slices_=null;this.headingDiv_=document.createElement("div");this.headingDiv_.className="timeline-canvas-based-track-title";this.appendChild(this.headingDiv_);this.canvasContainer_=document.createElement("div");this.canvasContainer_.className="timeline-canvas-based-track-canvas-container";
this.appendChild(this.canvasContainer_);this.canvas_=document.createElement("canvas");this.canvas_.className="timeline-canvas-based-track-canvas";this.canvasContainer_.appendChild(this.canvas_);this.ctx_=this.canvas_.getContext("2d")},detach:function(){this.viewport_&&(this.viewport_.removeEventListener("change",this.viewportChangeBoundToThis_),this.viewport_.removeEventListener("markersChange",this.viewportMarkersChangeBoundToThis_))},set headingWidth(c){this.headingDiv_.style.width=c},get heading(){return this.headingDiv_.textContent},
set heading(c){this.headingDiv_.textContent=c},set tooltip(c){this.headingDiv_.title=c},get viewport(){return this.viewport_},set viewport(c){if(this.viewport_=c)this.viewport_.removeEventListener("change",this.viewportChangeBoundToThis_),this.viewport_.removeEventListener("markersChange",this.viewportMarkersChangeBoundToThis_);if(this.viewport_=c)this.viewportChangeBoundToThis_=this.viewportChange_.bind(this),this.viewport_.addEventListener("change",this.viewportChangeBoundToThis_),this.viewportMarkersChangeBoundToThis_=
this.viewportMarkersChange_.bind(this),this.viewport_.addEventListener("markersChange",this.viewportMarkersChangeBoundToThis_),this.isAttachedToDocument_&&this.updateCanvasSizeIfNeeded_();this.invalidate()},viewportChange_:function(){this.invalidate()},viewportMarkersChange_:function(){2>this.viewport_.markers.length?this.classList.remove("timeline-viewport-track-with-distance-measurements"):this.classList.add("timeline-viewport-track-with-distance-measurements")},invalidate:function(){this.rafPending_||
(webkitRequestAnimationFrame(function(){this.rafPending_=!1;this.viewport_&&(this.updateCanvasSizeIfNeeded_(),this.redraw())}.bind(this),this),this.rafPending_=!0)},get isAttachedToDocument_(){var c=this.parentNode;if(c){for(;c.parentNode;)c=c.parentNode;return c==this.ownerDocument}},updateCanvasSizeIfNeeded_:function(){var c=window.getComputedStyle(this.canvasContainer_),a=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight)-parseInt(c.borderLeftWidth)-parseInt(c.borderRightWidth),
c=parseInt(c.height)-parseInt(c.paddingTop)-parseInt(c.paddingBottom)-parseInt(c.borderTopWidth)-parseInt(c.borderBottomWidth),b=window.devicePixelRatio||1;this.canvas_.width!=a&&(this.canvas_.width=a*b,this.canvas_.style.width=a+"px");this.canvas_.height!=c&&(this.canvas_.height=c*b,this.canvas_.style.height=c+"px")},get firstCanvas(){return this.canvas_}};return{TimelineCanvasBasedTrack:d}});
base.exportTo("tracing",function(){function d(a,b,e){if(0==a.length)return 1;for(var f=0,g=a.length-1,c,h,j=-1;f<=g;)c=Math.floor((f+g)/2),h=b(a[c])-e,0>h?f=c+1:(0<h||(j=c),g=c-1);return-1!=j?j:f}function c(a,b,e,f,g,c){if(0!=a.length&&!(f>g)){var h=d(a,b,f);if(-1!=h&&(0<h&&b(a[h-1])+e(a[h-1])>=f&&c(a[h-1]),h!=a.length))for(e=a.length;h<e&&!(b(a[h])>=g);h++)c(a[h])}}return{findLowIndexInSortedArray:d,findLowIndexInSortedIntervals:function(a,b,e,f){var g=d(a,b,f);return 0==g?f>=b(a[0])&&f<b(a[0]+e(a[0]))?
0:-1:g<=a.length&&f>=b(a[g-1])&&f<b(a[g-1])+e(a[g-1])?g-1:a.length},iterateOverIntersectingIntervals:c,getIntersectingIntervals:function(a,b,e,f,g){var k=[];c(a,b,e,f,g,function(b){k.push(b)});return k}}});"use strict";base.requireStylesheet("tracks.timeline_slice_track");base.require("tracks.timeline_canvas_based_track");base.require("sorted_array_utils");base.require("fast_rect_renderer");base.require("timeline_color_scheme");base.require("ui");
base.exportTo("tracing.tracks",function(){function d(){}function c(b,a){this.string=b;this.width=a}var a=tracing.getColorPalette(),b=base.ui.define(tracing.tracks.TimelineCanvasBasedTrack);b.prototype={__proto__:tracing.tracks.TimelineCanvasBasedTrack.prototype,SHOULD_ELIDE_TEXT:!0,decorate:function(){this.classList.add("timeline-slice-track");this.elidedTitleCache=new d;this.asyncStyle_=!1},decorateHit:function(){},get asyncStyle(){return this.asyncStyle_},set asyncStyle(b){this.asyncStyle_=!!b;
this.invalidate()},get slices(){return this.slices_},set slices(b){this.slices_=b||[];b||(this.visible=!1);this.invalidate()},get height(){return window.getComputedStyle(this).height},set height(b){this.style.height=b;this.invalidate()},labelWidth:function(b){var a=f[b];a||(a=this.ctx_.measureText(b).width,f[b]=a);return a+2},labelWidthWorld:function(b,a){return this.labelWidth(b)*a},redraw:function(){var b=this.ctx_,f=this.canvas_.width,g=this.canvas_.height;b.clearRect(0,0,f,g);var c=this.viewport_,
d=c.xViewVectorToWorld(1),m=c.xViewToWorld(0),f=c.xViewToWorld(f);c.drawUnderContent(b,m,f,g);b.save();c.applyTransformToCanvas(b);this.asyncStyle_&&(b.globalAlpha=0.25);var q=new tracing.FastRectRenderer(b,2*d,2*d,a);q.setYandH(0,g);for(var p=this.slices_,r=tracing.findLowIndexInSortedArray(p,function(b){return b.start+b.duration},m),t=r;t<p.length;++t){var s=p[t],u=s.start;if(u>f)break;var v=Math.max(s.duration,0.001),x=s.selected?s.colorId+e:s.colorId;v<d&&(v=d);0<s.duration?q.fillRect(u,v,x):
0.001<d?q.fillRect(u,d,x):(b.fillStyle=a[x],b.beginPath(),b.moveTo(u-4*d,g),b.lineTo(u,0),b.lineTo(u+4*d,g),b.closePath(),b.fill())}q.flush();b.restore();q=window.devicePixelRatio||1;if(8<g){b.textAlign="center";b.textBaseline="top";b.font=10*q+"px sans-serif";b.strokeStyle="rgb(0,0,0)";b.fillStyle="rgb(0,0,0)";u=20*d;v=this.SHOULD_ELIDE_TEXT;for(t=r;t<p.length;++t){s=p[t];if(s.start>f)break;s.duration>u&&(r=s.title,s.didNotFinish&&(r+=" (Did Not Finish)"),x=this.labelWidth(r),v&&this.labelWidthWorld(r,
d)>s.duration&&(x=this.elidedTitleCache.get(this,d,r,x,s.duration),r=x.string,x=x.width),x*d<s.duration&&(s=c.xWorldToView(s.start+0.5*s.duration),b.fillText(r,s,2.5*q,x)))}}c.drawOverContent(b,m,f,g)},addIntersectingItemsToSelection:function(b,a,e){var f=this.getBoundingClientRect();if(a<f.top||a>=f.bottom)return!1;b=this.viewport_.xViewVectorToWorld(b*devicePixelRatio);b=tracing.findLowIndexInSortedIntervals(this.slices_,function(b){return b.start},function(b){return b.duration},b);return 0<=b&&
b<this.slices_.length?(e=e.addSlice(this,this.slices_[b]),this.decorateHit(e),!0):!1},addIntersectingItemsInRangeToSelection:function(b,a,e,f,g){function c(b){b=g.addSlice(p,b);p.decorateHit(b)}var d=window.devicePixelRatio||1;b=this.viewport_.xViewToWorld(b*d);a=this.viewport_.xViewToWorld(a*d);d=this.getBoundingClientRect();e=Math.max(e,d.top);f=Math.min(f,d.bottom);if(!(e>f)){var p=this;tracing.iterateOverIntersectingIntervals(this.slices_,function(b){return b.start},function(b){return b.duration},
b,a,c)}},indexOfSlice_:function(b){for(var a=tracing.findLowIndexInSortedArray(this.slices_,function(b){return b.start},b.start);a<this.slices_.length&&b.start==this.slices_[a].start&&b.colorId!=this.slices_[a].colorId;)a++;return a<this.slices_.length?a:void 0},addItemNearToProvidedHitToSelection:function(b,a,e){if(!b.slice)return!1;b=this.indexOfSlice_(b.slice);if(void 0===b)return!1;a=b+a;if(0>a||a>=this.slices_.length)return!1;b=e.addSlice(this,this.slices_[a]);this.decorateHit(b);return!0},addAllObjectsMatchingFilterToSelection:function(b,
a){for(var e=0;e<this.slices_.length;++e)if(b.matchSlice(this.slices_[e])){var f=a.addSlice(this,this.slices_[e]);this.decorateHit(f)}}};var e=tracing.getColorPaletteHighlightIdBoost(),f={},g={};d.prototype={get:function(b,a,e,f,d){var m=g[e];m||(m={},g[e]=m);f=m[a];f||(m[a]={},f=m[a]);m=f[d];if(void 0===m){for(m=!1;b.labelWidthWorld(e,a)>d;)e=e.substring(0,0.75*e.length),m=!0;m&&3<e.length&&(e=e.substring(0,e.length-3)+"...");m=new c(e,b.labelWidth(e));f[d]=m}return m}};return{TimelineSliceTrack:b}});
"use strict";"use strict";base.exportTo("tracing",function(){var d=1;return{GUID:{allocate:function(){return d++}}}});"use strict";base.exportTo("tracing",function(){function d(c,a,b,e,f,g){this.category=c||"";this.title=a;this.start=e;this.colorId=b;this.args=f;this.didNotFinish=!1;void 0!==g&&(this.duration=g)}d.prototype={selected:!1,duration:void 0,get end(){return this.start+this.duration}};return{TimelineSlice:d}});"use strict";base.require("range");base.require("timeline_slice");base.require("timeline_color_scheme");
base.require("timeline_filter");
base.exportTo("tracing",function(){function d(a){this.sliceConstructor=a||c;this.openPartialSlices_=[];this.slices=[];this.bounds=new base.Range}var c=tracing.TimelineSlice;d.prototype={__proto__:Object.prototype,pushSlice:function(a){this.slices.push(a);return a},pushSlices:function(a){this.slices.push.apply(this.slices,a)},beginSlice:function(a,b,e,f){if(this.openPartialSlices_.length&&e<this.openPartialSlices_[this.openPartialSlices_.length-1].start)throw Error("Slices must be added in increasing timestamp order");var g=
tracing.getStringColorId(b);a=new this.sliceConstructor(a,b,g,e,f?f:{});this.openPartialSlices_.push(a);return a},isTimestampValidForBeginOrEnd:function(a){return!this.openPartialSlices_.length?!0:a>=this.openPartialSlices_[this.openPartialSlices_.length-1].start},get openSliceCount(){return this.openPartialSlices_.length},endSlice:function(a){if(!this.openSliceCount)throw Error("endSlice called without an open slice");var b=this.openPartialSlices_[this.openSliceCount-1];this.openPartialSlices_.splice(this.openSliceCount-
1,1);if(a<b.start)throw Error("Slice "+b.name+" end time is before its start.");b.duration=a-b.start;this.pushSlice(b);return b},autoCloseOpenSlices:function(a){a||(this.updateBounds(),a=this.bounds.max);for(;0<this.openSliceCount;)this.endSlice(a).didNotFinish=!0},shiftTimestampsForward:function(a){for(var b=0;b<this.slices.length;b++){var e=this.slices[b];e.start+=a}for(b=0;b<this.openPartialSlices_.length;b++)e=this.openPartialSlices_[i],e.start+=a},updateBounds:function(){this.bounds.reset();
for(var a=0;a<this.slices.length;a++)this.bounds.addValue(this.slices[a].start),this.bounds.addValue(this.slices[a].end);this.openPartialSlices_.length&&(this.bounds.addValue(this.openPartialSlices_[0].start),this.bounds.addValue(this.openPartialSlices_[this.openPartialSlices_.length-1].start))}};return{TimelineSliceGroup:d}});"use strict";base.require("range");base.require("timeline_slice");
base.exportTo("tracing",function(){function d(b,e,f,g,c){a.call(this,b,e,f,g,c)}function c(){this.slices=[];this.bounds=new base.Range}var a=tracing.TimelineSlice;d.prototype={__proto__:a.prototype,toJSON:function(){for(var b={},a=Object.keys(this),f=0;f<a.length;f++){var g=a[f];"function"!=typeof this[g]&&(b[g]="startThread"==g||"endThread"==g?this[g].guid:this[g])}return b},id:void 0,startThread:void 0,endThread:void 0,subSlices:void 0};c.prototype={__proto__:Object.prototype,push:function(b){this.slices.push(b)},
get length(){return this.slices.length},shiftTimestampsForward:function(b){for(var a=0;a<this.slices.length;a++){var f=this.slices[a];f.start+=b;for(var g=0;g<f.subSlices.length;g++)f.subSlices[g].start+=b}},updateBounds:function(){this.bounds.reset();for(var b=0;b<this.slices.length;b++)this.bounds.addValue(this.slices[b].start),this.bounds.addValue(this.slices[b].end)},computeSubGroups:function(){for(var b={},a=0;a<this.slices.length;++a){var f=this.slices[a],g=f.startThread.guid;b[g]||(b[g]=new c);
b[g].slices.push(f)}var a=[],k;for(k in b)f=b[k],f.updateBounds(),a.push(f);return a}};return{TimelineAsyncSlice:d,TimelineAsyncSliceGroup:c}});"use strict";base.exportTo("tracing",function(){function d(c,a,b,e,f){this.category=c||"";this.title=a;this.colorId=b;this.start=e;this.args=f}d.prototype={selected:!1,duration:0,get end(){return this.start}};return{TimelineSample:d}});"use strict";base.require("range");base.require("timeline_guid");base.require("timeline_slice");base.require("timeline_slice_group");
base.require("timeline_async_slice_group");base.require("timeline_sample");
base.exportTo("tracing",function(){function d(b,e,c,d,j,l){a.call(this,b,e,c,d,j,l);this.subSlices=[]}function c(a,g){b.call(this,d);this.guid_=tracing.GUID.allocate();if(!a)throw Error("Parent must be provided.");this.parent=a;this.tid=g;this.cpuSlices=void 0;this.samples_=[];this.asyncSlices=new e;this.bounds=new base.Range}var a=tracing.TimelineSlice,b=tracing.TimelineSliceGroup,e=tracing.TimelineAsyncSliceGroup;d.prototype={__proto__:a.prototype};c.prototype={__proto__:b.prototype,get guid(){return this.guid_},
compareTo:function(b){return c.compare(this,b)},toJSON:function(){for(var b={},a=Object.keys(this),e=0;e<a.length;e++){var c=a[e];"function"!=typeof this[c]&&(b[c]="parent"==c?this[c].guid:this[c])}return b},addSample:function(b,a,e,c){if(this.samples_.length&&e<this.samples_[this.samples_.length-1].start)throw Error("Samples must be added in increasing timestamp order.");var j=tracing.getStringColorId(a);b=new tracing.TimelineSample(b,a,j,e,c?c:{});this.samples_.push(b);return b},get samples(){return this.samples_},
name:void 0,shiftTimestampsForward:function(a){b.prototype.shiftTimestampsForward.call(this,a);if(this.cpuSlices)for(var e=0;e<this.cpuSlices.length;e++)this.cpuSlices[e].start+=a;if(this.samples_.length)for(e=0;e<this.samples_.length;e++)this.samples_[e].start+=a;this.asyncSlices.shiftTimestampsForward(a)},get isEmpty(){return this.slices.length||this.openSliceCount||this.cpuSlices&&this.cpuSlices.length||this.asyncSlices.length||this.samples_.length?!1:!0},updateBounds:function(){b.prototype.updateBounds.call(this);
this.asyncSlices.updateBounds();this.bounds.addRange(this.asyncSlices.bounds);this.cpuSlices&&this.cpuSlices.length&&(this.bounds.addValue(this.cpuSlices[0].start),this.bounds.addValue(this.cpuSlices[this.cpuSlices.length-1].end));this.samples_.length&&(this.bounds.addValue(this.samples_[0].start),this.bounds.addValue(this.samples_[this.samples_.length-1].end))},addCategoriesToDict:function(b){for(var a=0;a<this.slices.length;a++)b[this.slices[a].category]=!0;for(a=0;a<this.asyncSlices.length;a++)b[this.asyncSlices.slices[a].category]=
!0;for(a=0;a<this.samples_.length;a++)b[this.samples_[a].category]=!0},get userFriendlyName(){return this.parent.userFriendlyName+": "+(this.name||this.tid)},get userFriendlyDetails(){return this.parent.userFriendlyDetails+", tid: "+this.tid+(this.name?", name: "+this.name:"")}};c.compare=function(b,a){var e=b.parent.compareTo(a.parent);return 0!=e?e:b.name&&a.name?(e=b.name.localeCompare(a.name),0==e?b.tid-a.tid:e):b.name?-1:a.name?1:b.tid-a.tid};return{TimelineThreadSlice:d,TimelineThread:c}});
"use strict";base.require("timeline_guid");base.require("range");
base.exportTo("tracing",function(){function d(c,a,b,e){this.guid_=tracing.GUID.allocate();this.parent=c;this.id=a;this.category=b||"";this.name=e;this.seriesNames=[];this.seriesColors=[];this.timestamps=[];this.samples=[];this.bounds=new base.Range}d.prototype={__proto__:Object.prototype,get guid(){return this.guid_},toJSON:function(){for(var c={},a=Object.keys(this),b=0;b<a.length;b++){var e=a[b];"function"!=typeof this[e]&&(c[e]="parent"==e?this[e].guid:this[e])}return c},get numSeries(){return this.seriesNames.length},
get numSamples(){return this.timestamps.length},getSampleValue:function(c,a){return this.samples[c*this.numSeries+a]},getSampleStatistics:function(c){c.sort();for(var a=this.numSeries,b=[],e=0;e<a;++e){for(var f=0,g=Number.MAX_VALUE,d=-Number.MAX_VALUE,h=0;h<c.length;h++)var j=c[h],f=f+this.getSampleValue(j,e),g=Math.min(this.getSampleValue(j,e),g),d=Math.max(this.getSampleValue(j,e),d);f/=c.length;h=this.getSampleValue(c[0],e);j=this.getSampleValue(c[c.length-1],e);b.push({min:g,max:d,avg:f,start:h,
end:j})}return b},shiftTimestampsForward:function(c){for(var a=0;a<this.timestamps.length;a++)this.timestamps[a]+=c},updateBounds:function(){if(this.seriesNames.length!=this.seriesColors.length)throw Error("seriesNames.length must match seriesColors.length");if(this.numSeries*this.numSamples!=this.samples.length)throw Error("samples.length must be a multiple of numSamples.");this.totals=[];this.maxTotal=0;this.bounds.reset();if(0!=this.samples.length){this.bounds.addValue(this.timestamps[0]);this.bounds.addValue(this.timestamps[this.timestamps.length-
1]);for(var c=this.numSeries,a=-Infinity,b=0;b<this.timestamps.length;b++){for(var e=0,f=0;f<c;f++)e+=this.samples[b*c+f],this.totals.push(e);e>a&&(a=e)}this.maxTotal=a}}};d.compare=function(c,a){var b=c.parent.compareTo(a);if(0!=b)return b;b=c.name.localeCompare(a.name);return 0==b?c.tid-a.tid:b};return{TimelineCounter:d}});"use strict";base.require("range");base.require("timeline_guid");base.require("timeline_thread");base.require("timeline_counter");
base.exportTo("tracing",function(){function d(){this.guid_=tracing.GUID.allocate();this.threads={};this.counters={};this.bounds=new base.Range}var c=tracing.TimelineThread,a=tracing.TimelineCounter;d.prototype={get guid(){return this.guid_},get numThreads(){var b=0,a;for(a in this.threads)b++;return b},shiftTimestampsForward:function(b){for(var a in this.threads)this.threads[a].shiftTimestampsForward(b);for(var f in this.counters)this.counters[f].shiftTimestampsForward(b)},autoCloseOpenSlices:function(b){for(var a in this.threads)this.threads[a].autoCloseOpenSlices(b)},
updateBounds:function(){this.bounds.reset();for(var b in this.threads)this.threads[b].updateBounds(),this.bounds.addRange(this.threads[b].bounds);for(var a in this.counters)this.counters[a].updateBounds(),this.bounds.addRange(this.counters[a].bounds)},addCategoriesToDict:function(b){for(var a in this.threads)this.threads[a].addCategoriesToDict(b);for(var f in this.counters)b[this.counters[f].category]=!0},findAllThreadsNamed:function(b){var a=[],f;for(f in this.threads){var g=this.threads[f];g.name==
b&&a.push(g)}return a},pruneEmptyContainers:function(){var b={},a;for(a in this.threads){var f=this.threads[a];f.isEmpty||(b[a]=f)}this.threads=b},getOrCreateThread:function(b){this.threads[b]||(this.threads[b]=new c(this,b));return this.threads[b]},getOrCreateCounter:function(b,e){var f=b+"."+e;this.counters[f]||(this.counters[f]=new a(this,f,b,e));return this.counters[f]}};return{TimelineProcessBase:d}});"use strict";base.require("timeline_process_base");
base.exportTo("tracing",function(){function d(c){tracing.TimelineProcessBase.call(this);this.pid=c}d.compare=function(c,a){return c.pid-a.pid};d.prototype={__proto__:tracing.TimelineProcessBase.prototype,compareTo:function(c){return d.compare(this,c)},get userFriendlyName(){return this.pid},get userFriendlyDetails(){return"pid: "+this.pid}};return{TimelineProcess:d}});"use strict";base.require("timeline_process_base");
base.exportTo("tracing",function(){function d(){tracing.TimelineProcessBase.call(this)}d.compare=function(){return 0};d.prototype={__proto__:tracing.TimelineProcessBase.prototype,compareTo:function(c){return d.compare(this,c)},get userFriendlyName(){return"kernel"},get userFriendlyDetails(){return"kernel"}};return{TimelineKernel:d}});"use strict";base.require("range");base.require("timeline_slice");base.require("timeline_counter");
base.exportTo("tracing",function(){function d(a){this.cpuNumber=a;this.slices=[];this.counters={};this.bounds=new base.Range}var c=tracing.TimelineCounter;d.prototype={getOrCreateCounter:function(a,b){var e;e=a.length?a+"."+b:b;this.counters[e]||(this.counters[e]=new c(this,e,a,b));return this.counters[e]},shiftTimestampsForward:function(a){for(var b=0;b<this.slices.length;b++)this.slices[b].start+=a;for(var e in this.counters)this.counters[e].shiftTimestampsForward(a)},updateBounds:function(){this.bounds.reset();
this.slices.length&&(this.bounds.addValue(this.slices[0].start),this.bounds.addValue(this.slices[this.slices.length-1].end));for(var a in this.counters)this.counters[a].updateBounds(),this.bounds.addRange(this.counters[a].bounds)},addCategoriesToDict:function(a){for(var b=0;b<this.slices.length;b++)a[this.slices[b].category]=!0;for(var e in this.counters)a[this.counters[e].category]=!0}};d.compare=function(a,b){return a.cpuNumber-b.cpuNumber};return{TimelineCpu:d}});"use strict";base.require("range");
base.require("event_target");base.require("timeline_process");base.require("timeline_kernel");base.require("timeline_cpu");base.require("timeline_filter");
base.exportTo("tracing",function(){function d(a,e){this.kernel=new b;this.cpus={};this.processes={};this.importErrors=[];this.metadata=[];this.categories=[];this.bounds=new base.Range;a&&this.importTraces([a],e)}function c(){this.importPriority=0}var a=tracing.TimelineProcess,b=tracing.TimelineKernel,e=tracing.TimelineCpu,f=[];d.registerImporter=function(b){f.push(b)};d.prototype={__proto__:base.EventTarget.prototype,get numProcesses(){var b=0,a;for(a in this.processes)b++;return b},getOrCreateCpu:function(b){this.cpus[b]||
(this.cpus[b]=new e(b));return this.cpus[b]},getOrCreateProcess:function(b){this.processes[b]||(this.processes[b]=new a(b));return this.processes[b]},updateCategories_:function(){var b={};this.kernel.addCategoriesToDict(b);for(var a in this.processes)this.processes[a].addCategoriesToDict(b);for(var e in this.cpus)this.cpus[e].addCategoriesToDict(b);this.categories=[];for(var f in b)""!=f&&this.categories.push(f)},updateBounds:function(){this.bounds.reset();this.kernel.updateBounds();this.bounds.addRange(this.kernel.bounds);
for(var b in this.processes)this.processes[b].updateBounds(),this.bounds.addRange(this.processes[b].bounds);for(var a in this.cpus)this.cpus[a].updateBounds(),this.bounds.addRange(this.cpus[a].bounds)},shiftWorldToZero:function(){if(!this.bounds.isEmpty){var b=this.bounds.min;this.kernel.shiftTimestampsForward(-b);for(var a in this.processes)this.processes[a].shiftTimestampsForward(-b);for(var e in this.cpus)this.cpus[e].shiftTimestampsForward(-b);this.updateBounds()}},getAllThreads:function(){var b=
[],a;for(a in this.kernel.threads)b.push(f.threads[a]);for(var e in this.processes){var f=this.processes[e];for(a in f.threads)b.push(f.threads[a])}return b},getAllCpus:function(){var b=[],a;for(a in this.cpus)b.push(this.cpus[a]);return b},getAllProcesses:function(){var b=[],a;for(a in this.processes)b.push(this.processes[a]);return b},getAllCounters:function(){var b=[],a;for(a in this.processes){var e=this.processes[a],f;for(f in e.counters)b.push(e.counters[f])}for(var c in this.cpus){a=this.cpus[c];
for(var d in a.counters)b.push(a.counters[d])}return b},findAllThreadsNamed:function(b){var a=[];a.push.apply(a,this.kernel.findAllThreadsNamed(b));for(var e in this.processes)a.push.apply(a,this.processes[e].findAllThreadsNamed(b));return a},createImporter_:function(b){for(var a,e=0;e<f.length;++e)if(f[e].canImport(b)){a=f[e];break}if(!a)throw Error("Could not find an importer for the provided eventData.");return new a(this,b)},importTraces:function(b,a){void 0===a&&(a=!0);for(var e=[],f=0;f<b.length;++f)e.push(this.createImporter_(b[f]));
e.sort(function(b,a){return b.importPriority-a.importPriority});for(f=0;f<e.length;f++)e[f].importEvents(0<f);this.updateBounds();this.kernel.autoCloseOpenSlices(this.bounds.max);for(var c in this.processes)this.processes[c].autoCloseOpenSlices(this.bounds.max);for(f=0;f<e.length;f++)e[f].finalizeImport();this.kernel.pruneEmptyContainers();for(c in this.processes)this.processes[c].pruneEmptyContainers();this.updateBounds();this.updateCategories_();a&&this.shiftWorldToZero()}};c.canImport=function(b){return b instanceof
Array&&0==b.length?!0:"string"===typeof b||b instanceof String?0==b.length:!1};c.prototype={__proto__:Object.prototype,importEvents:function(){},finalizeImport:function(){}};d.registerImporter(c);return{TimelineModel:d}});"use strict";base.require("tracks.timeline_container_track");base.require("tracks.timeline_slice_track");base.require("timeline_filter");base.require("timeline_model");base.require("ui");
base.exportTo("tracing.tracks",function(){var d=base.ui.define(tracing.tracks.TimelineContainerTrack);d.prototype={__proto__:tracing.tracks.TimelineContainerTrack.prototype,decorate:function(){this.classList.add("timeline-cpu-track")},get cpu(){return this.cpu_},set cpu(c){this.cpu_=c;this.updateChildTracks_()},get tooltip(){return this.tooltip_},set tooltip(c){this.tooltip_=c;this.updateChildTracks_()},get heading(){return this.heading_},set heading(c){this.heading_=c;this.updateChildTracks_()},
applyCategoryFilter_:function(){this.categoryFilter.matchCpu(this.cpu_)?this.updateChildTracks_():this.visible=!1},updateChildTracks_:function(){this.detach();if(this.cpu_){var c=tracing.filterSliceArray(this.categoryFilter_,this.cpu_.slices);if(c.length){var a=new tracing.tracks.TimelineSliceTrack;a.slices=c;a.heading=this.heading_;a.tooltip=this.tooltip_;this.addTrack_(a)}for(var b in this.cpu_.counters)c=this.cpu_.counters[b],a=new tracing.tracks.TimelineCounterTrack,a.heading="CPU "+this.cpu_.cpuNumber+
" "+c.name+":",a.counter=c,this.addTrack_(a)}this.addControlButtonElements_(!1)}};return{TimelineCpuTrack:d}});"use strict";base.requireStylesheet("tracks.timeline_counter_track");base.require("tracks.timeline_canvas_based_track");base.require("timeline_color_scheme");base.require("ui");
base.exportTo("tracing.tracks",function(){var d=tracing.getColorPalette(),c=base.ui.define(tracing.tracks.TimelineCanvasBasedTrack);c.prototype={__proto__:tracing.tracks.TimelineCanvasBasedTrack.prototype,decorate:function(){this.classList.add("timeline-counter-track");this.addControlButtonElements_(!1);this.selectedSamples_={};this.categoryFilter_=new tracing.TimelineFilter},decorateHit:function(){},get counter(){return this.counter_},set counter(a){this.counter_=a;this.invalidate();this.updateVisibility_()},
set categoryFilter(a){this.categoryFilter_=a;this.updateVisibility_()},get selectedSamples(){return this.selectedSamples_},updateVisibility_:function(){this.visible=this.counter_&&this.categoryFilter_.matchCounter(this.counter_)},redraw:function(){var a=this.counter_,b=this.ctx_,e=this.canvas_.width,f=this.canvas_.height;b.clearRect(0,0,e,f);var c=this.viewport_,k=c.xViewVectorToWorld(1),h=c.xViewToWorld(0),e=c.xViewToWorld(e);c.drawUnderContent(b,h,e,f);var j=c.xViewVectorToWorld(1);b.save();c.applyTransformToCanvas(b);
for(var l=a.numSeries,w=a.numSamples,m=tracing.findLowIndexInSortedArray(a.timestamps,function(b){return b},h),m=0<m-1?m-1:0,q=f/a.maxTotal,p=a.numSeries-1;0<=p;p--){b.fillStyle=d[a.seriesColors[p]];b.beginPath();for(var r=m-1,t=0<=r?a.timestamps[r]-j:-1,s=f,u=!1;;){var v=r+1;if(v>=w){b.lineTo(t,s);b.lineTo(t+8*k,s);b.lineTo(t+8*k,f);break}var x=a.timestamps[v],r=a.totals[v*l+p],y=f-q*r;if(x>e){b.lineTo(x,s);b.lineTo(x,f);break}x-t<j?r=v:(u||(b.moveTo(h,f),u=!0),b.lineTo(x,s),b.lineTo(x,y),r=v,t=
x,s=y)}b.closePath();b.fill()}b.fillStyle="rgba(255, 0, 0, 1)";for(v in this.selectedSamples_)if(this.selectedSamples_[v]){x=a.timestamps[v];for(p=a.numSeries-1;0<=p;p--)r=a.totals[v*l+p],y=f-q*r,b.fillRect(x-k,y-1,3*k,3)}b.restore();c.drawOverContent(b,h,e,f)},addIntersectingItemsToSelection:function(a,b,e){var f=this.getBoundingClientRect();if(b<f.top||b>=f.bottom)return!1;b=this.viewport_.xViewVectorToWorld(a*devicePixelRatio);f=this.counter_;if(a<this.counter_.timestamps[0])return!1;a=tracing.findLowIndexInSortedArray(f.timestamps,
function(b){return b},b);if(0>a||a>=f.timestamps.length)return!1;0<a&&b>this.counter_.timestamps[a-1]&&a--;this.getBoundingClientRect();e=e.addCounterSample(this,this.counter,a);this.decorateHit(e);return!0},addIntersectingItemsInRangeToSelection:function(a,b,e,f,c){var d=this.getBoundingClientRect();e=Math.max(e,d.top);f=Math.min(f,d.bottom);if(!(e>f)){f=this.counter_;d=window.devicePixelRatio||1;a=this.viewport_.xViewToWorld(a*d);d=this.viewport_.xViewToWorld(b*d);e=tracing.findLowIndexInSortedArray(f.timestamps,
function(b){return b},a);b=tracing.findLowIndexInSortedArray(f.timestamps,function(b){return b},d);0<e&&a>f.timestamps[e-1]&&e--;0<b&&d>f.timestamps[b-1]&&b--;for(a=e;a<=b;a++)a>=f.timestamps.length||(d=c.addCounterSample(this,this.counter,a),this.decorateHit(d))}},addAllObjectsMatchingFilterToSelection:function(){}};return{TimelineCounterTrack:c}});"use strict";base.require("tracks.timeline_container_track");base.require("sorted_array_utils");base.require("ui");
base.exportTo("tracing.tracks",function(){var d=base.ui.define(tracing.tracks.TimelineContainerTrack);d.prototype={__proto__:tracing.tracks.TimelineContainerTrack.prototype,decorate:function(){this.classList.add("timeline-slice-group-track")},get group(){return this.group_},set group(c){this.group_=c;this.updateChildTracks_()},set heading(c){this.tracks_.length&&(this.tracks_[0].heading=c)},set tooltip(c){this.tracks_.length&&(this.tracks_[0].tooltip=c)},set decorateHit(c){this.decorateHit_=c;this.updateChildTracks_()},
applyCategoryFilter_:function(){this.updateChildTracks_()},addSliceTrack_:function(c){var a=new tracing.tracks.TimelineSliceTrack;a.slices=c;a.decorateHit=this.decorateHit_;this.addTrack_(a);return a},updateChildTracks_:function(){if(this.group_){var c=tracing.filterSliceArray(this.categoryFilter,this.group_.slices);if(c.length){if(this.visible=!0,!this.areArrayContentsSame_(this.filteredSlices_,c)){this.filteredSlices_=c;this.detach();this.subRows_=this.buildSubRows_(c);for(c=0;c<this.subRows_.length;c++)this.subRows_[c].length&&
this.addSliceTrack_(this.subRows_[c])}}else this.visible=!1}else this.visible=!1},buildSubRows_:function(c){if(!c.length)return[];for(var a=[],b=0;b<c.length;b++)c[b].subSlices&&c[b].subSlices.splice(0,c[b].subSlices.length),a.push(b);a.sort(function(b,a){var e=c[b],f=c[a];return e.start!=f.start?e.start-f.start:a-b});var e=[[]];this.badSlices_=[];for(b=0;b<a.length;b++){for(var f=c[a[b]],g=!1,d=e.length-1;0<=d;d--)if(0!=e[d].length){var h=e[d][e[d].length-1];f.start<h.start&&(this.badSlices_.push(f),
g=!0);if(f.start>=h.start&&f.end<=h.end){for(;e.length<=d+1;)e.push([]);e[d+1].push(f);h.subSlices&&h.subSlices.push(f);g=!0;break}}g||e[0].push(f)}return e},areArrayContentsSame_:function(c,a){if(!c||!a||(!c.length||!a.length)||c.length!=a.length)return!1;for(var b=0;b<c.length;++b)if(c[b]!=a[b])return!1;return!0}};return{TimelineSliceGroupTrack:d}});"use strict";base.require("tracks.timeline_slice_group_track");base.require("ui");
base.exportTo("tracing.tracks",function(){var d=base.ui.define(tracing.tracks.TimelineSliceGroupTrack);d.prototype={__proto__:tracing.tracks.TimelineSliceGroupTrack.prototype,decorate:function(){this.classList.add("timeline-async-slice-group-track")},addSliceTrack_:function(c){c=tracing.tracks.TimelineSliceGroupTrack.prototype.addSliceTrack_.call(this,c);c.asyncStyle=!0;return c},buildSubRows_:function(){var c=tracing.filterSliceArray(this.categoryFilter,this.group_.slices);c.sort(function(b,a){return b.start-
a.start});for(var a=[],b=0;b<c.length;b++){for(var e=c[b],f=!1,g=0;g<a.length;g++){var d=a[g];if(e.start>=d[d.length-1].end){f=!0;if(void 0===e.subSlices||1>e.subSlices.length)throw Error("TimelineAsyncEvent missing subSlices: ")+e.name;for(g=0;g<e.subSlices.length;g++)d.push(e.subSlices[g]);break}}if(!f&&(d=[],void 0!==e.subSlices)){for(g=0;g<e.subSlices.length;g++)d.push(e.subSlices[g]);a.push(d)}}return a}};return{TimelineAsyncSliceGroupTrack:d}});"use strict";base.requireStylesheet("tracks.timeline_thread_track");
base.require("tracks.timeline_container_track");base.require("tracks.timeline_slice_track");base.require("tracks.timeline_slice_group_track");base.require("tracks.timeline_async_slice_group_track");base.require("timeline_filter");base.require("ui");
base.exportTo("tracing.tracks",function(){var d=base.ui.define(tracing.tracks.TimelineContainerTrack);d.prototype={__proto__:tracing.tracks.TimelineContainerTrack.prototype,decorate:function(){this.classList.add("timeline-thread-track");this.categoryFilter_=new tracing.TimelineFilter},get thread(){return this.thread_},set thread(c){this.thread_=c;this.updateChildTracks_()},get tooltip(){return this.tooltip_},set tooltip(c){this.tooltip_=c;this.updateChildTracks_()},get heading(){return this.heading_},
set heading(c){this.heading_=c;this.updateChildTracks_()},applyCategoryFilter_:function(){this.updateVisibility_()},updateChildTracks_:function(){this.detach();if(this.thread_){var c=new tracing.tracks.TimelineSliceTrack;c.heading="";c.slices=this.thread_.cpuSlices;c.height="4px";c.decorateHit=function(a){a.thread=this.thread_};this.addTrack_(c);c=new tracing.tracks.TimelineAsyncSliceGroupTrack;c.categoryFilter=this.categoryFilter;c.decorateHit=function(){};c.group=this.thread_.asyncSlices;this.addTrack_(c);
c=new tracing.tracks.TimelineSliceGroupTrack;c.decorateHit=function(a){a.thread=this.thread_};c.group=this.thread_;this.addTrack_(c);this.thread_.samples.length&&(c=new tracing.tracks.TimelineSliceTrack,c.group=this.thread_,c.slices=this.thread_.samples,c.decorateHit=function(a){a.thread=this.thread_},this.addTrack_(c));this.updateVisibility_()}this.addControlButtonElements_(4<=this.tracks_.length)},updateVisibility_:function(){if(this.categoryFilter.matchThread(this.thread)){for(var c=!1,a=0;a<this.tracks_.length;++a){var b=
this.tracks_[a];if(b.visible&&(c=!0,1<=a)){b.heading=this.heading_;b.tooltip=this.tooltip_;break}}this.visible=c}else this.visible=!1},collapsedDidChange:function(c){if(c){c=parseInt(this.tracks_[0].height);for(var a=0;a<this.tracks_.length;++a)2<c?this.tracks_[a].height=Math.floor(c)+"px":this.tracks_[a].style.display="none",c*=0.5}else for(a=0;a<this.tracks_.length;++a)this.tracks_[a].height=this.tracks_[0].height,this.tracks_[a].style.display=""}};return{TimelineThreadTrack:d}});"use strict";base.require("tracks.timeline_container_track");
base.require("tracks.timeline_counter_track");base.require("tracks.timeline_thread_track");base.require("timeline_filter");base.require("ui");
base.exportTo("tracing.tracks",function(){var d=base.ui.define(tracing.tracks.TimelineContainerTrack);d.prototype={__proto__:tracing.tracks.TimelineContainerTrack.prototype,decorate:function(){this.classList.add("timeline-process-track");this.categoryFilter_=new tracing.TimelineFilter},get process(){return this.process_},set process(c){this.process_=c;this.updateChildTracks_()},applyCategoryFilter_:function(){this.visible=this.categoryFilter.matchProcess(this.process)&&!!this.numVisibleChildTracks},
updateChildTracks_:function(){this.detach();if(this.process_){var c=[],a;for(a in this.process.counters)c.push(this.process.counters[a]);c.sort(tracing.TimelineCounter.compare);c.forEach(function(b){var a=new tracing.tracks.TimelineCounterTrack;a.heading=b.name+":";a.counter=b;this.addTrack_(a)}.bind(this));c=[];for(a in this.process.threads)c.push(this.process.threads[a]);c.sort(tracing.TimelineThread.compare);c.forEach(function(b){var a=new tracing.tracks.TimelineThreadTrack;a.heading=b.userFriendlyName+
":";a.tooltip=b.userFriendlyDetails;a.thread=b;this.addTrack_(a)}.bind(this))}}};return{TimelineProcessTrack:d}});"use strict";base.requireStylesheet("tracks.timeline_model_track");base.require("tracks.timeline_container_track");base.require("tracks.timeline_cpu_track");base.require("tracks.timeline_process_track");base.require("ui");
base.exportTo("tracing.tracks",function(){var d=base.ui.define(tracing.tracks.TimelineContainerTrack);d.prototype={__proto__:tracing.tracks.TimelineContainerTrack.prototype,decorate:function(){this.classList.add("timeline-model-track");this.measuringStick_=new tracing.MeasuringStick;this.measuringStick_.attach()},detach:function(){tracing.tracks.TimelineContainerTrack.prototype.detach.call(this);this.measuringStick_.detach()},get model(){return this.model_},set model(c){this.model_=c;this.updateHeadingWidth_();
this.updateChildTracks_()},updateHeadingWidth_:function(){var c=[];this.model.getAllThreads().forEach(function(b){c.push(b.userFriendlyName)});this.model.getAllCounters().forEach(function(b){c.push(b.name)});this.model.getAllCpus().forEach(function(b){c.push("CPU "+b.cpuNumber)});var a=0,b=document.createElement("div");b.style.position="fixed";b.className="timeline-canvas-based-track-title";for(var e=0;e<c.length;e++){b.textContent=c[e]+":__";var f=this.measuringStick_.measure(b).width;300<f&&(f=
300);f>a&&(a=f)}this.headingWidth=a+"px"},updateChildTracks_:function(){this.detachAllChildren();if(this.model_){var c=this.model_.getAllCpus();c.sort(tracing.TimelineCpu.compare);for(var a=0;a<c.length;++a){var b=c[a],e=new tracing.tracks.TimelineCpuTrack;e.heading="CPU "+b.cpuNumber+":";e.cpu=b;this.addTrack_(e)}c=this.model_.getAllProcesses();c.sort(tracing.TimelineProcess.compare);for(a=0;a<c.length;++a)b=c[a],e=new tracing.tracks.TimelineProcessTrack,e.process=b,this.addTrack_(e)}}};return{TimelineModelTrack:d}});
"use strict";base.requireStylesheet("tracks.timeline_viewport_track");base.require("tracks.timeline_track");base.require("tracks.timeline_canvas_based_track");base.require("ui");
base.exportTo("tracing.tracks",function(){var d=base.ui.define(tracing.tracks.TimelineCanvasBasedTrack),c=Math.log(10);d.prototype={__proto__:tracing.tracks.TimelineCanvasBasedTrack.prototype,decorate:function(){this.classList.add("timeline-viewport-track");this.strings_secs_=[];this.strings_msecs_=[];this.addEventListener("mousedown",this.onMouseDown)},onMouseDown:function(a){0==a.button&&this.placeAndBeginDraggingMarker(a.clientX)},placeAndBeginDraggingMarker:function(a){var b=window.devicePixelRatio||
1;a=this.viewport_.xViewToWorld((a-this.canvasContainer_.offsetLeft)*b);var e=this.viewport_.findMarkerNear(a,6),f=!1,c=!1;e||(e=this.viewport_.addMarker(a),f=!0);e.selected=!0;var d=this,h=function(a){a=d.viewport_.xViewToWorld((a.clientX-d.canvasContainer_.offsetLeft)*b);e.positionWorld=a;c=!0},j=function(){e.selected=!1;!c&&!f&&d.viewport_.removeMarker(e);document.removeEventListener("mouseup",j);document.removeEventListener("mousemove",h)};document.addEventListener("mouseup",j);document.addEventListener("mousemove",
h)},drawLine_:function(a,b,e,f,c,d){a.beginPath();a.moveTo(b,e);a.lineTo(f,c);a.closePath();a.strokeStyle=d;a.stroke()},drawArrow_:function(a,b,e,f,c,d,h){this.drawLine_(a,b,e,f,c,h);var j=f-b,l=c-e,w=Math.sqrt(j*j+l*l),m=(w-10)/w;b+=m*j;e+=m*l;l=l/w*d;d*=-(j/w);a.beginPath();a.fillStyle=h;a.moveTo(b+l,e+d);a.lineTo(f,c);a.lineTo(b-l,e-d);a.lineTo(b+l,e+d);a.closePath();a.fill()},redraw:function(){var a=this.ctx_,b=this.canvas_.width,e=this.canvas_.height;a.clearRect(0,0,b,e);var f=this.viewport_;
f.xViewVectorToWorld(1);for(var g=f.xViewToWorld(0),d=f.xViewToWorld(b),h=this.classList.contains("timeline-viewport-track-with-distance-measurements"),j=h?e/2:e,l=0;l<f.markers.length;++l)f.markers[l].drawTriangle_(a,g,d,e,j,f);var w=window.devicePixelRatio||1,m=150*w,l=f.xViewVectorToWorld(m),q,p,r;p=Math.pow(10,Math.ceil(Math.log(l)/c));w=[10,5,2,1];for(l=0;l<w.length;++l)if(!(f.xWorldVectorToView(p/w[l])<m)){q=p/w[l-1];break}r=void 0;100>q?(m="ms",p=1,r=this.strings_msecs_):(m="s",p=1E3,r=this.strings_secs_);
var t=f.xWorldVectorToView(q/5),l=Math.floor(g/q)*q,e=Math.floor(0.25*e);a.fillStyle="rgb(0, 0, 0)";a.strokeStyle="rgb(0, 0, 0)";a.textAlign="left";a.textBaseline="top";w=window.devicePixelRatio||1;a.font=9*w+"px sans-serif";for(g=l;g<d;g+=q){var s=Math.floor(f.xWorldToView(g)),l=Math.floor(1E5*(g/p))/1E5;r[l]||(r[l]=l+" "+m);a.fillText(r[l],s+2*w,0);a.beginPath();a.moveTo(s,0);a.lineTo(s,j);for(l=1;5>l;++l){var u=Math.floor(s+t*l);a.moveTo(u,j-e);a.lineTo(u,j)}a.stroke()}if(h){a.moveTo(0,j);a.lineTo(b,
j);a.stroke();b=f.markers.slice();b.sort(function(b,a){return b.positionWorld_-a.positionWorld_});j+=2;d=j+4;for(l=0;l<b.length-1;l++)w=b[l+1],r=b[l],t=w.positionWorld-r.positionWorld,q=f.xWorldVectorToView(t),h=f.xWorldToView(r.positionWorld+t/2),100>t?(m="ms",p=1):(m="s",p=1E3),p=t/p,m=Math.abs(Math.floor(1E3*p)/1E3)+" "+m,p=a.measureText(m).width,e=f.xViewVectorToWorld(p),p=p+26+10,g=r.positionWorld+t/2-e/2,s=g+e,t=j,e=f.xWorldToView(g),g=f.xWorldToView(s),r=f.xWorldToView(r.positionWorld),w=f.xWorldToView(w.positionWorld),
s=!1,p<=q&&(a.fillStyle="rgb(0,0,0)",a.fillText(m,e,t),s=!0),26<=q&&(s?(m=e-10,p=g+10):p=m=h,this.drawArrow_(a,m,d,r,d,3,"rgb(128,121,121)"),this.drawArrow_(a,p,d,w,d,3,"rgb(128,121,121)"))}},addIntersectingItemsToSelection:function(){},addIntersectingItemsInRangeToSelection:function(){},addAllObjectsMatchingFilterToSelection:function(){}};return{TimelineViewportTrack:d}});"use strict";base.requireStylesheet("timeline");base.require("event_target");base.require("measuring_stick");base.require("timeline_filter");
base.require("timeline_selection");base.require("timeline_viewport");base.require("tracks.timeline_model_track");base.require("tracks.timeline_viewport_track");base.require("ui");
base.exportTo("tracing",function(){var d=tracing.TimelineSelection,c=tracing.TimelineViewport,a=base.ui.define("div");a.prototype={__proto__:HTMLDivElement.prototype,model_:null,decorate:function(){this.classList.add("timeline");this.categoryFilter_=new tracing.TimelineCategoryFilter;this.viewport_=new c(this);this.viewportTrack_=new tracing.tracks.TimelineViewportTrack;this.viewportTrack_.viewport=this.viewport_;this.appendChild(this.viewportTrack_);this.modelTrackContainer_=document.createElement("div");
this.modelTrackContainer_.className="timeline-model-track-container";this.appendChild(this.modelTrackContainer_);this.modelTrack_=new tracing.tracks.TimelineModelTrack;this.modelTrackContainer_.appendChild(this.modelTrack_);this.dragBox_=this.ownerDocument.createElement("div");this.dragBox_.className="timeline-drag-box";this.appendChild(this.dragBox_);this.hideDragBox_();this.bindEventListener_(document,"keypress",this.onKeypress_,this);this.bindEventListener_(document,"keydown",this.onKeydown_,this);
this.bindEventListener_(document,"keyup",this.onKeyup_,this);this.bindEventListener_(document,"mousemove",this.onMouseMove_,this);this.bindEventListener_(document,"mouseup",this.onMouseUp_,this);this.addEventListener("mousewheel",this.onMouseWheel_);this.addEventListener("mousedown",this.onMouseDown_);this.addEventListener("dblclick",this.onDblClick_);this.lastMouseViewPos_={x:0,y:0};this.maxHeadingWidth_=0;this.selection_=new d},bindEventListener_:function(b,a,f,c){this.boundListeners_||(this.boundListeners_=
[]);f=f.bind(c);this.boundListeners_.push({object:b,event:a,boundFunc:f});b.addEventListener(a,f)},detach:function(){this.modelTrack_.detach();for(var b=0;b<this.boundListeners_.length;b++){var a=this.boundListeners_[b];a.object.removeEventListener(a.event,a.boundFunc)}this.boundListeners_=void 0;this.viewport_.detach()},get viewport(){return this.viewport_},get categoryFilter(){return this.categoryFilter_},set categoryFilter(b){this.categoryFilter_=b;this.modelTrack_.categoryFilter=b},get model(){return this.model_},
set model(b){if(!b)throw Error("Model cannot be null");var a=this.model_!=b;this.model_=b;this.modelTrack_.model=b;this.modelTrack_.viewport=this.viewport_;this.modelTrack_.categoryFilter=this.categoryFilter;this.viewportTrack_.headingWidth=this.modelTrack_.headingWidth;a&&this.viewport_.setWhenPossible(this.setInitialViewport_.bind(this))},get numVisibleTracks(){return this.modelTrack_.numVisibleTracks},setInitialViewport_:function(){var b=0.15*(this.model_.bounds.max-this.model_.bounds.min);this.viewport_.xSetWorldBounds(this.model_.bounds.min-
b,this.model_.bounds.max+b,this.firstCanvas.width)},addAllObjectsMatchingFilterToSelection:function(b,a){this.modelTrack_.addAllObjectsMatchingFilterToSelection(b,a)},get focusElement(){return this.focusElement_?this.focusElement_:this.parentElement},set focusElement(b){this.focusElement_=b},get listenToKeys_(){return!this.viewport_.isAttachedToDocument_||this.activeElement instanceof tracing.TimelineFindControl?!1:!this.focusElement_?!0:0<=this.focusElement.tabIndex?document.activeElement==this.focusElement:
!0},onKeypress_:function(b){var a=this.viewport_;if(this.firstCanvas&&this.listenToKeys_&&"INPUT"!=document.activeElement.nodeName){var f=this.firstCanvas.clientWidth;switch(b.keyCode){case 119:case 44:this.zoomBy_(1.5);break;case 115:case 111:this.zoomBy_(1/1.5);break;case 103:this.onGridToggle_(!0);break;case 71:this.onGridToggle_(!1);break;case 87:case 60:this.zoomBy_(10);break;case 83:case 79:this.zoomBy_(0.1);break;case 97:a.panX+=a.xViewVectorToWorld(0.1*f);break;case 100:case 101:a.panX-=a.xViewVectorToWorld(0.1*
f);break;case 65:a.panX+=a.xViewVectorToWorld(0.5*f);break;case 68:a.panX-=a.xViewVectorToWorld(0.5*f);break;case 48:case 122:this.setInitialViewport_();break;case 102:this.zoomToSelection_()}}},onMouseWheel_:function(b){if(b.altKey){var a=Math.pow(1.5,b.wheelDeltaY/120);this.zoomBy_(a);b.preventDefault()}},onKeydown_:function(b){if(this.listenToKeys_){var a,f=this.viewport_,c=this.firstCanvas.clientWidth;switch(b.keyCode){case 37:if(a=this.selection.getShiftedSelection(-1))this.setSelectionAndMakeVisible(a),
b.preventDefault();else{if(!this.firstCanvas)return;f.panX+=f.xViewVectorToWorld(0.1*c)}break;case 39:if(a=this.selection.getShiftedSelection(1))this.setSelectionAndMakeVisible(a),b.preventDefault();else{if(!this.firstCanvas)return;f.panX-=f.xViewVectorToWorld(0.1*c)}break;case 9:-1==this.focusElement.tabIndex&&(b.shiftKey?this.selectPrevious_(b):this.selectNext_(b),b.preventDefault())}b.shiftKey&&this.dragBeginEvent_&&(b=b.shiftKey,this.dragBeginEvent_&&this.setDragBoxPosition_(this.dragBoxXStart_,
this.dragBoxYStart_,this.dragBoxXEnd_,this.dragBoxYEnd_,b))}},onKeyup_:function(b){this.listenToKeys_&&(b.shiftKey||this.dragBeginEvent_&&this.setDragBoxPosition_(this.dragBoxXStart_,this.dragBoxYStart_,this.dragBoxXEnd_,this.dragBoxYEnd_,b.shiftKey))},zoomBy_:function(b){if(this.firstCanvas){var a=this.viewport_,f=this.firstCanvas.clientWidth,c=this.lastMouseViewPos_.x*(window.devicePixelRatio||1),d=a.xViewToWorld(c);a.scaleX*=b;a.xPanWorldPosToViewPos(d,c,f)}},zoomToSelection_:function(){if(this.selection){var b=
this.selection.bounds,a=b.min+0.5*(b.max-b.min),b=0.5*(b.max-b.min),f=0.15*b;this.viewport_.xSetWorldBounds(a-b-f,a+b+f,this.firstCanvas.width)}},get keyHelp(){var b="Qwerty Controls\n w/s           : Zoom in/out    (with shift: go faster)\n a/d           : Pan left/right\n\nDvorak Controls\n ,/o           : Zoom in/out     (with shift: go faster)\n a/e           : Pan left/right\n\nMouse Controls\n drag          : Select slices   (with "+(0==navigator.platform.indexOf("Mac")?"cmd":"ctrl")+": zoom to slices)\n drag + shift  : Select all slices vertically\n\n",
b=this.focusElement.tabIndex?b+" <-            : Select previous event on current timeline\n ->            : Select next event on current timeline\n":b+"General Navigation\n g/General     : Shows grid at the start/end of the selected task\n <-,^TAB       : Select previous event on current timeline\n ->, TAB       : Select next event on current timeline\n";return b+"\nAlt + Scroll to zoom in/out\nDbl-click to zoom in; Shift dbl-click to zoom out\nf to zoom into selection\nz to reset zoom and pan to initial view\n"},
get selection(){return this.selection_},set selection(b){if(!(b instanceof d))throw Error("Expected TimelineSelection");var a;for(a=0;a<this.selection_.length;a++)this.selection_[a].selected=!1;this.selection_=b;base.dispatchSimpleEvent(this,"selectionChange");for(a=0;a<this.selection_.length;a++)this.selection_[a].selected=!0;this.viewport_.dispatchChangeEvent()},setSelectionAndMakeVisible:function(b,a){if(!(b instanceof d))throw Error("Expected TimelineSelection");this.selection=b;var f=this.selection.bounds,
c=this.viewport_.xWorldVectorToView(f.max-f.min);a&&50>c?(c=f.min+0.5*(f.max-f.min),f=5*(f.max-f.min),this.viewport_.xSetWorldBounds(c-0.5*f,c+0.5*f,this.firstCanvas.width)):this.viewport_.xPanWorldBoundsIntoView(f.min,f.max,this.firstCanvas.width)},get firstCanvas(){if(this.viewportTrack_)return this.viewportTrack_.firstCanvas;if(this.modelTrack_)return this.modelTrack_.firstCanvas},hideDragBox_:function(){this.dragBox_.style.left="-1000px";this.dragBox_.style.top="-1000px";this.dragBox_.style.width=
0;this.dragBox_.style.height=0},setDragBoxPosition_:function(b,a,f,c,d){var h=Math.min(b,f);b=Math.max(b,f);f=this.modelTrack_.getBoundingClientRect();d?(d=f.top,f=f.bottom):(d=Math.min(a,c),f=Math.max(a,c));a=d;c=h+(b-h);d=a+(f-d);var j=this.modelTrackContainer_.getBoundingClientRect();f=j.left;var l=j.top,w=j.right,j=j.bottom,m=parseInt(this.modelTrack_.headingWidth);f+=m;m={};h>w||c<f||a>j||d<l?a=!1:(m.left=Math.max(f,h),m.top=Math.max(l,a),m.right=Math.min(w,c),m.bottom=Math.min(j,d),m.width=
m.right-m.left,m.height=m.bottom-m.top,a=m);this.dragBox_.style.left=a.left+"px";this.dragBox_.style.width=a.width+"px";this.dragBox_.style.top=a.top+"px";this.dragBox_.style.height=a.height+"px";a=window.devicePixelRatio||1;c=this.firstCanvas;h=this.viewport_.xViewToWorld((h-c.offsetLeft)*a);b=this.viewport_.xViewToWorld((b-c.offsetLeft)*a);a=Math.round(100*(b-h))/100;this.dragBox_.textContent=a+"ms";a=new base.Event("selectionChanging");a.loWX=h;a.hiWX=b;this.dispatchEvent(a)},onGridToggle_:function(b){b=
b?this.selection_.bounds.min:this.selection_.bounds.max;var a=Math.ceil((b-this.model_.bounds.min)/this.viewport_.gridStep_);this.viewport_.gridTimebase=b-(a+1)*this.viewport_.gridStep_;this.viewport_.gridEnabled=!0},isChildOfThis_:function(b){if(b!=this){for(;b.parentNode;){if(b==this)return!0;b=b.parentNode}return!1}},onMouseDown_:function(b){if(0===b.button)if(b.shiftKey)this.viewportTrack_.placeAndBeginDraggingMarker(b.clientX);else{var a=this.firstCanvas,f=this.modelTrack_.getBoundingClientRect(),
c=this.firstCanvas.getBoundingClientRect();f&&(b.clientX>=f.left&&b.clientX<f.right&&b.clientY>=f.top&&b.clientY<f.bottom&&b.clientX>=c.left&&b.clientX<c.right)&&(this.viewport_.xViewToWorld(b.clientX-a.offsetLeft),this.dragBeginEvent_=b,b.preventDefault(),document.activeElement&&document.activeElement.blur(),0<=this.focusElement.tabIndex&&this.focusElement.focus())}},onMouseMove_:function(b){if(this.firstCanvas){var a=this.firstCanvas;this.lastMouseViewPos_={x:b.clientX-a.offsetLeft,y:b.clientY-
a.offsetTop};this.dragBeginEvent_&&(this.dragBoxXStart_=this.dragBeginEvent_.clientX,this.dragBoxXEnd_=b.clientX,this.dragBoxYStart_=this.dragBeginEvent_.clientY,this.dragBoxYEnd_=b.clientY,this.setDragBoxPosition_(this.dragBoxXStart_,this.dragBoxYStart_,this.dragBoxXEnd_,this.dragBoxYEnd_,b.shiftKey))}},onMouseUp_:function(b){if(this.dragBeginEvent_){this.hideDragBox_();var a=this.dragBeginEvent_;this.dragBeginEvent_=null;var f,c=Math.min(a.clientX,b.clientX),k=Math.max(a.clientX,b.clientX);this.modelTrackContainer_.getBoundingClientRect();
b.shiftKey?(a=this.modelTrack_.getBoundingClientRect(),f=a.top,a=a.bottom):(f=Math.min(a.clientY,b.clientY),a=Math.max(a.clientY,b.clientY));var h=this.firstCanvas,c=c-h.offsetLeft,k=k-h.offsetLeft,h=new d;this.modelTrack_.addIntersectingItemsInRangeToSelection(c,k,f,a,h);this.selection=h;(base.isMac&&b.metaKey||!base.isMac&&b.ctrlKey)&&this.zoomToSelection_()}},onDblClick_:function(b){var a=this.modelTrackContainer_.getBoundingClientRect(),f=a.left,a=a.right,c=parseInt(this.modelTrack_.headingWidth);
b.clientX<f+c||b.clientX>a||(f=4,b.shiftKey&&(f=1/f),this.zoomBy_(f),b.preventDefault())}};base.defineProperty(a,"model",base.PropertyKind.JS);return{Timeline:a}});"use strict";base.require("ui");base.requireStylesheet("timeline_analysis");
base.exportTo("tracing",function(){function d(b,a){var f=a.getSliceHitsAsSelection(),c=a.getCounterSampleHitsAsSelection();if(1==f.length){var d=f[0].slice,h=b.appendTable("timeline-analysis-slice-table",2);b.appendTableHeader(h,"Selected slice:");b.appendSummaryRow(h,"Title",d.title);d.category&&b.appendSummaryRow(h,"Category",d.category);b.appendSummaryRowTime(h,"Start",d.start);b.appendSummaryRowTime(h,"Duration",d.duration);d.durationInUserTime&&b.appendSummaryRowTime(h,"Duration (U)",d.durationInUserTime);
var f=0,j;for(j in d.args)f+=1;if(0<f)for(j in b.appendSummaryRow(h,"Args"),d.args)b.appendSummaryRow(h," "+j,d.args[j])}else if(1<f.length){var l=f.bounds.min,w=f.bounds.max;f.map(function(b){return b.slice.title});var h=0,m={};for(j=0;j<f.length;j++)d=f[j].slice,m[d.title]||(m[d.title]={slices:[]},h++),m[d.title].slices.push(d);h=b.appendTable("timeline-analysis-slices-table",3);b.appendTableHeader(h,"Slices:");var d=0,q;for(q in m){var p=m[q],r=0;j=0;var t=Number.MAX_VALUE,s=-Number.MAX_VALUE,
u=Number.MAX_VALUE,v=-Number.MAX_VALUE;for(j=0;j<p.slices.length;j++)r+=p.slices[j].duration,t=Math.min(p.slices[j].start,t),s=Math.max(p.slices[j].start,s),u=Math.min(p.slices[j].duration,u),v=Math.max(p.slices[j].duration,v);d+=r;0==p.slices.length&&(j=0);j=r/p.slices.length;u={min:u,max:v,avg:j,avg_stddev:void 0,frequency:void 0,frequency_stddev:void 0};for(j=v=0;j<p.slices.length;j++)var x=u.avg-p.slices[j].duration,v=v+x*x;u.avg_stddev=Math.sqrt(v/(p.slices.length-1));j=s-t;if(2<p.slices.length&&
0<j){t=p.slices.length-1;u.frequency=1E3*t/j;v=0;for(j=1;j<p.slices.length;j++)x=u.frequency-1E3/(p.slices[j].start-p.slices[j-1].start),v+=x*x;u.frequency_stddev=Math.sqrt(v/(t-1))}b.appendDataRow(h,q,r,p.slices.length,u)}b.appendDataRow(h,"*Totals",d,f.length);b.appendSpacingRow(h);b.appendSummaryRowTime(h,"Selection start",l);b.appendSummaryRowTime(h,"Selection extent",w-l)}if(1==c.length){var h=c[0],f=h.counter,y=h.sampleIndex,c=[];for(j=0;j<f.numSeries;++j)c.push(f.samples[f.numSeries*y+j]);
h=b.appendTable("timeline-analysis-counter-table",2);b.appendTableHeader(h,"Selected counter:");b.appendSummaryRow(h,"Title",f.name);b.appendSummaryRowTime(h,"Timestamp",f.timestamps[y]);for(j=0;j<f.numSeries;j++)b.appendSummaryRow(h,f.seriesNames[j],c[j])}else if(1<c.length){q={};for(j=0;j<c.length;j++)f=c[j].counter,q[f.guid]||(q[f.guid]=[]),q[f.guid].push(c[j]);h=b.appendTable("timeline-analysis-counter-table",7);b.appendTableHeader(h,"Counters:");for(y in q){c=q[y];f=c[0].counter;l=[];for(j=0;j<
c.length;j++)l.push(c[j].sampleIndex);c=f.getSampleStatistics(l);for(j=0;j<c.length;j++)b.appendDataRow(h,f.name+": "+f.seriesNames[j],void 0,void 0,c[j])}}}var c=base.ui.define("div");c.prototype={__proto__:HTMLDivElement.prototype,decorate:function(){},tsRound_:function(b){return Math.round(1E3*b)/1E3},appendElement_:function(b,a,f){a=b.ownerDocument.createElement(a);b.appendChild(a);void 0!=f&&(a.textContent=f);return a},appendText_:function(b,a){b.ownerDocument.createTextNode(a);b.appendChild(textNode);
return textNode},appendTableCell_:function(b,a,f,c){a=this.appendElement_(a,"td",c);a.className=b.className+"-col-"+f;return a},appendTableCellWithTooltip_:function(b,a,f,c,d){if(d)return a=this.appendElement_(a,"td"),a.className=b.className+"-col-"+f,b=this.appendElement_(a,"span",c),b.className="tooltip",b.title=d,a;this.appendTableCell_(b,a,f,c)},appendTable:function(b,a){var f=this.appendElement_(this,"table");f.className=b+" timeline-analysis-table";f.numColumns=a;return f},appendTableHeader:function(b,
a){var f=this.appendElement_(b,"tr");this.appendElement_(f,"th",a).className="timeline-analysis-table-header"},appendSummaryRow:function(b,a,f){var c=this.appendElement_(b,"tr");c.className="timeline-analysis-table-row";this.appendTableCell_(b,c,0,a);if(void 0!==f){if("{"==f[0]&&"}"==f[f.length-1]){var d;try{d=JSON.parse(f)}catch(h){d=void 0}void 0===!d?this.appendTableCell_(b,c,1,f):(a=JSON.stringify(d,null," "),this.appendTableCell_(b,c,1,a))}else this.appendTableCell_(b,c,1,f);for(a=2;a<b.numColumns;a++)this.appendTableCell_(b,
c,a,"")}else for(a=1;a<b.numColumns;a++)this.appendTableCell_(b,c,1,"")},appendSpacingRow:function(b){var a=this.appendElement_(b,"tr");a.className="timeline-analysis-table-row";for(var f=0;f<b.numColumns;f++)this.appendTableCell_(b,a,f," ")},appendSummaryRowTime:function(b,a,f){this.appendSummaryRow(b,a,this.tsRound_(f)+" ms")},appendDataRow:function(b,a,f,c,d){var h=void 0;d&&(h="Min Duration:\t"+this.tsRound_(d.min)+" ms \rMax Duration:\t"+this.tsRound_(d.max)+" ms \rAvg Duration:\t"+this.tsRound_(d.avg)+
" ms (\u03c3 = "+this.tsRound_(d.avg_stddev)+")",d.start&&(h+="\rStart Time:\t"+this.tsRound_(d.start)+" ms"),d.end&&(h+="\rEnd Time:\t"+this.tsRound_(d.end)+" ms"),d.frequency&&d.frequency_stddev&&(h+="\rFrequency:\t"+this.tsRound_(d.frequency)+" occurrences/s (\u03c3 = "+this.tsRound_(d.frequency_stddev)+")"));d=this.appendElement_(b,"tr");d.className="timeline-analysis-table-row";this.appendTableCellWithTooltip_(b,d,0,a,h);void 0!==f?this.appendTableCellWithTooltip_(b,d,1,this.tsRound_(f)+" ms",
h):this.appendTableCell_(b,d,1,"");void 0!==c?this.appendTableCellWithTooltip_(b,d,2,String(c)+" occurrences",h):this.appendTableCell_(b,d,2,"")}};var a=base.ui.define("div");a.prototype={__proto__:HTMLDivElement.prototype,decorate:function(){this.className="timeline-analysis"},set selection(a){this.textContent="";var e=new c;d(e,a);this.appendChild(e)}};return{TimelineAnalysisView:a,analyzeSelection_:d}});base.requireStylesheet("overlay");base.require("ui");base.require("event_target");
base.exportTo("tracing",function(){var d=base.ui.define("div");d.prototype={__proto__:HTMLDivElement.prototype,decorate:function(){this.classList.add("overlay-root");this.visible=!1;this.contentHost=this.ownerDocument.createElement("div");this.contentHost.classList.add("content-host");this.tabCatcher=this.ownerDocument.createElement("span");this.tabCatcher.tabIndex=0;this.appendChild(this.contentHost);this.onKeydownBoundToThis_=this.onKeydown_.bind(this);this.onFocusInBoundToThis_=this.onFocusIn_.bind(this);
this.addEventListener("mousedown",this.onMousedown_.bind(this))},showOverlay:function(a){a.oldParent_=a.parentNode;this.contentHost.appendChild(a);this.contentHost.appendChild(this.tabCatcher);this.ownerDocument.body.classList.add("disabled-by-overlay");this.visible=!0;a.tabIndex=0;var b=a.querySelector("button, input, list, select, a");b||(b=a);b.focus();this.ownerDocument.addEventListener("focusin",this.onFocusInBoundToThis_,!0);a.addEventListener("keydown",this.onKeydownBoundToThis_)},onMousedown_:function(a){a.target==
this&&a.preventDefault()},onFocusIn_:function(a){a.target==this.tabCatcher&&window.setTimeout(this.focusOverlay_.bind(this),0)},focusOverlay_:function(){this.contentHost.firstChild.focus()},onKeydown_:function(a){9==a.keyCode&&(a.shiftKey&&a.target==this.contentHost.firstChild)&&a.preventDefault()},hideOverlay:function(a){this.visible=!1;this.ownerDocument.body.classList.remove("disabled-by-overlay");this.lastFocusOut_=void 0;a.parentNode.removeChild(this.tabCatcher);a.oldParent_?(a.oldParent_.appendChild(a),
delete a.oldParent_):this.contentHost.removeChild(a);a.removeEventListener("keydown",this.onKeydownBoundToThis_);this.ownerDocument.removeEventListener("focusin",this.onFocusInBoundToThis_)}};base.defineProperty(d,"visible",base.PropertyKind.BOOL_ATTR);var c=base.ui.define("div");c.prototype={__proto__:HTMLDivElement.prototype,decorate:function(){if(!this.ownerDocument.querySelector(".overlay-root")){var a=this.ownerDocument.createElement("div");base.ui.decorate(a,d);this.ownerDocument.body.appendChild(a)}this.classList.add("overlay");
this.visible=!1;this.defaultClickShouldClose=!0;this.autoClose=!1;this.additionalCloseKeyCodes=[];this.onKeyDown=this.onKeyDown.bind(this);this.onKeyPress=this.onKeyPress.bind(this);this.onDocumentClick=this.onDocumentClick.bind(this)},onVisibleChanged_:function(){var a=this.ownerDocument.querySelector(".overlay-root");base.dispatchSimpleEvent(this,"visibleChange");this.visible?(a.showOverlay(this),document.addEventListener("keydown",this.onKeyDown,!0),document.addEventListener("keypress",this.onKeyPress,
!0),document.addEventListener("click",this.onDocumentClick,!0)):(document.removeEventListener("keydown",this.onKeyDown,!0),document.removeEventListener("keypress",this.onKeyPress,!0),document.removeEventListener("click",this.onDocumentClick,!0),a.hideOverlay(this))},onKeyDown:function(a){this.autoClose&&27==a.keyCode&&(this.visible=!1,a.preventDefault())},onKeyPress:function(a){if(this.autoClose)for(var b=0;b<this.additionalCloseKeyCodes.length;b++)if(a.keyCode==this.additionalCloseKeyCodes[b]){this.visible=
!1;a.preventDefault();break}},onDocumentClick:function(a){if(this.defaultClickShouldClose){for(var b=a.target;null!==b;){if(b===this)return;b=b.parentNode}this.visible=!1;a.preventDefault()}}};base.defineProperty(c,"visible",base.PropertyKind.BOOL_ATTR,c.prototype.onVisibleChanged_);base.defineProperty(c,"defaultClickShouldClose",base.PropertyKind.BOOL_ATTR);return{Overlay:c}});"use strict";base.require("timeline_filter");base.require("overlay");
base.exportTo("tracing",function(){var d=base.ui.define("div");d.prototype={__proto__:tracing.Overlay.prototype,decorate:function(){tracing.Overlay.prototype.decorate.call(this);this.className="timeline-view-category-filter-overlay";this.autoClose=!0;var c=document.createElement("div");c.className="category-filter-dialog";c.textContent="Select active categories:";this.formEl_=document.createElement("form");this.formEl_.className="category-filter-dialog-form";c.appendChild(this.formEl_);this.appendChild(c);
this.addEventListener("visibleChange",this.onVisibleChange_.bind(this))},get model(){return this.model_},set model(c){this.model_=c},get settings(){return this.settings_},set settings(c){this.settings_=c},set settingUpdatedCallback(c){this.settingUpdatedCallback_=c},onVisibleChange_:function(){this.visible&&this.updateForm_()},updateForm_:function(){this.formEl_.innerHTML="";var c=this.model_.categories;c.concat(this.settings_.keys("categories"));for(var a=0;a<c.length;a++){var b=c[a],e=document.createElement("input");
e.type="checkbox";e.id=e.value=b;e.checked="true"==this.settings_.get(b,"true","categories");e.onchange=this.updateSetting_.bind(this);var f=document.createElement("label");f.textContent=b;f.setAttribute("for",b);this.formEl_.appendChild(e);this.formEl_.appendChild(f);this.formEl_.appendChild(document.createElement("br"))}},updateSetting_:function(c){c=c.target;this.settings_.set(c.value,c.checked,"categories");this.settingUpdatedCallback_()}};return{TimelineCategoryFilterDialog:d}});"use strict";
base.require("timeline");base.require("timeline_filter");base.require("overlay");
base.exportTo("tracing",function(){function d(){this.model_=this.timeline_=void 0;this.filterText_="";this.filterHits_=new tracing.TimelineSelection;this.filterHitsDirty_=!0;this.currentHitIndex_=0}var c=base.ui.define("div");c.prototype={__proto__:tracing.Overlay.prototype,decorate:function(){tracing.Overlay.prototype.decorate.call(this);this.className="timeline-find-control";this.hitCountEl_=document.createElement("div");this.hitCountEl_.className="hit-count-label";this.hitCountEl_.textContent=
"1 of 7";var a=document.createElement("div");a.className="timeline-button find-previous";a.textContent="\u2190";a.addEventListener("click",function(){this.controller.findPrevious();this.updateHitCountEl_()}.bind(this));var b=document.createElement("div");b.className="timeline-button find-next";b.textContent="\u2192";b.addEventListener("click",function(){this.controller.findNext();this.updateHitCountEl_()}.bind(this));this.filterEl_=document.createElement("input");this.filterEl_.type="input";this.filterEl_.addEventListener("input",
function(){this.controller.filterText=this.filterEl_.value;this.updateHitCountEl_()}.bind(this));this.filterEl_.addEventListener("keydown",function(a){13==a.keyCode?b.click():27==a.keyCode&&(this.filterEl_.blur(),this.updateHitCountEl_())}.bind(this));this.filterEl_.addEventListener("blur",function(){this.updateHitCountEl_()}.bind(this));this.filterEl_.addEventListener("focus",function(){this.updateHitCountEl_()}.bind(this));this.appendChild(this.filterEl_);this.appendChild(a);this.appendChild(b);
this.appendChild(this.hitCountEl_);this.updateHitCountEl_()},get controller(){return this.controller_},set controller(a){this.controller_=a;this.updateHitCountEl_()},focus:function(){this.filterEl_.selectionStart=0;this.filterEl_.selectionEnd=this.filterEl_.value.length;this.filterEl_.focus()},updateHitCountEl_:function(){if(!this.controller||document.activeElement!=this.filterEl_)this.hitCountEl_.textContent="";else{var a=this.controller.currentHitIndex,b=this.controller.filterHits.length;this.hitCountEl_.textContent=
0==b?"0 of 0":a+1+" of "+b}}};d.prototype={__proto__:Object.prototype,get timeline(){return this.timeline_},set timeline(a){this.timeline_=a;this.filterHitsDirty_=!0},get filterText(){return this.filterText_},set filterText(a){a!=this.filterText_&&(this.filterText_=a,this.filterHitsDirty_=!0,this.findNext())},get filterHits(){if(this.filterHitsDirty_)if(this.filterHitsDirty_=!1,this.timeline_){var a=new tracing.TimelineTitleFilter(this.filterText);this.filterHits_.clear();this.timeline.addAllObjectsMatchingFilterToSelection(a,
this.filterHits_);this.currentHitIndex_=this.filterHits_.length-1}else this.filterHits_.clear(),this.currentHitIndex_=0;return this.filterHits_},get currentHitIndex(){return this.currentHitIndex_},find_:function(a){if(this.timeline){var b=this.filterHits.length;this.currentHitIndex_+=a;0>this.currentHitIndex_&&(this.currentHitIndex_=b-1);this.currentHitIndex_>=b&&(this.currentHitIndex_=0);0>this.currentHitIndex_||this.currentHitIndex_>=b?this.timeline.selection=new tracing.TimelineSelection:(a=0==
this.currentHitIndex_,b=this.filterHits.subSelection(this.currentHitIndex_),this.timeline.setSelectionAndMakeVisible(b,a))}},findNext:function(){this.find_(1)},findPrevious:function(){this.find_(-1)}};return{TimelineFindControl:c,TimelineFindController:d}});base.require("timeline_model");base.require("timeline_color_scheme");
base.exportTo("tracing.importer",function(){function d(c,a){this.importPriority=1;this.model_=c;"string"===typeof a||a instanceof String?("["==a[0]&&(n=a.length,"\n"==a[n-1]&&(a=a.substring(0,n-1),n--,"\r"==a[n-1]&&(a=a.substring(0,n-1),n--)),","==a[n-1]&&(a=a.substring(0,n-1)),"]"!=a[n-1]&&(a+="]")),this.events_=JSON.parse(a)):this.events_=a;if(this.events_.traceEvents){var b=this.events_;this.events_=this.events_.traceEvents;for(fieldName in b)"traceEvents"!=fieldName&&this.model_.metadata.push({name:fieldName,
value:b[fieldName]})}this.allAsyncEvents_=[]}d.canImport=function(c){return"string"===typeof c||c instanceof String?"{"==c[0]||"["==c[0]:c instanceof Array&&c.length&&c[0].ph?!0:c.traceEvents?c.traceEvents instanceof Array&&c.traceEvents[0].ph:!1};d.prototype={__proto__:Object.prototype,processAsyncEvent:function(c,a){var b=this.model_.getOrCreateProcess(a.pid).getOrCreateThread(a.tid);this.allAsyncEvents_.push({event:a,thread:b})},processCounterEvent:function(c){var a;a=void 0!==c.id?c.name+"["+
c.id+"]":c.name;a=this.model_.getOrCreateProcess(c.pid).getOrCreateCounter(c.cat,a);if(0==a.numSeries){for(var b in c.args)a.seriesNames.push(b),a.seriesColors.push(tracing.getStringColorId(a.name+"."+b));if(0==a.numSeries){this.model_.importErrors.push("Expected counter "+c.name+" to have at least one argument to use as a value.");delete a.parent.counters[a.name];return}}a.timestamps.push(c.ts/1E3);for(var e=0;e<a.numSeries;e++)b=a.seriesNames[e],void 0===c.args[b]?a.samples.push(0):a.samples.push(c.args[b])},
importEvents:function(){for(var c=this.events_,a=0;a<c.length;a++){var b=c[a];if("B"==b.ph){var e=this.model_.getOrCreateProcess(b.pid).getOrCreateThread(b.tid);e.isTimestampValidForBeginOrEnd(b.ts/1E3)?e.beginSlice(b.cat,b.name,b.ts/1E3,b.args):this.model_.importErrors.push("Timestamps are moving backward.")}else if("E"==b.ph)if(e=this.model_.getOrCreateProcess(b.pid).getOrCreateThread(b.tid),e.isTimestampValidForBeginOrEnd(b.ts/1E3))if(e.openSliceCount){var e=e.endSlice(b.ts/1E3),f;for(f in b.args)void 0!==
e.args[f]&&this.model_.importErrors.push("Both the B and E phases of "+e.name+"provided values for argument "+f+". The value of the E phase event will be used."),e.args[f]=b.args[f]}else this.model_.importErrors.push("E phase event without a matching B phase event.");else this.model_.importErrors.push("Timestamps are moving backward.");else"S"==b.ph?this.processAsyncEvent(a,b):"F"==b.ph?this.processAsyncEvent(a,b):"T"==b.ph?this.processAsyncEvent(a,b):"I"==b.ph?(e=this.model_.getOrCreateProcess(b.pid).getOrCreateThread(b.tid),
e.beginSlice(b.cat,b.name,b.ts/1E3,b.args),e.endSlice(b.ts/1E3)):"P"==b.ph?(e=this.model_.getOrCreateProcess(b.pid).getOrCreateThread(b.tid),e.addSample(b.cat,b.name,b.ts/1E3,b.args)):"C"==b.ph?this.processCounterEvent(b):"M"==b.ph?"thread_name"==b.name?(e=this.model_.getOrCreateProcess(b.pid).getOrCreateThread(b.tid),e.name=b.args.name):this.model_.importErrors.push("Unrecognized metadata name: "+b.name):"s"!=b.ph&&"t"!=b.ph&&"f"!=b.ph&&this.model_.importErrors.push("Unrecognized event phase: "+
b.ph+"("+b.name+")")}},finalizeImport:function(){this.createAsyncSlices_()},createAsyncSlices_:function(){if(0!=this.allAsyncEvents_.length){this.allAsyncEvents_.sort(function(a,b){return a.event.ts-b.event.ts});for(var c={},a=this.allAsyncEvents_,b=0;b<a.length;b++){var e=a[b],f=e.event,g=f.name;if(void 0===g)this.model_.importErrors.push("Async events (ph: S, T or F) require an name parameter.");else{var d=f.id;if(void 0===d)this.model_.importErrors.push("Async events (ph: S, T or F) require an id parameter.");
else if("S"==f.ph)void 0===c[g]&&(c[g]={}),c[g][d]?this.model_.importErrors.push("At "+f.ts+", a slice of the same id "+d+" was alrady open."):(c[g][d]=[],c[g][d].push(e));else if(void 0===c[g])this.model_.importErrors.push("At "+f.ts+", no slice named "+g+" was open.");else if(void 0===c[g][d])this.model_.importErrors.push("At "+f.ts+", no slice named "+g+" with id="+d+" was open.");else{var h=c[g][d];h.push(e);if("F"==f.ph){var j=new tracing.TimelineAsyncSlice(h[0].event.cat,g,tracing.getStringColorId(g),
h[0].event.ts/1E3);j.duration=f.ts/1E3-h[0].event.ts/1E3;j.startThread=h[0].thread;j.endThread=e.thread;j.id=d;j.args=h[0].event.args;j.subSlices=[];for(e=1;e<h.length;++e){var l=g;"T"==h[e-1].event.ph&&(l=g+":"+h[e-1].event.args.step);l=new tracing.TimelineAsyncSlice(h[0].event.cat,l,tracing.getStringColorId(g+e),h[e-1].event.ts/1E3);l.duration=h[e].event.ts/1E3-h[e-1].event.ts/1E3;l.startThread=h[e-1].thread;l.endThread=h[e].thread;l.id=d;l.args=h[e-1].event.args;j.subSlices.push(l)}var h=j.subSlices[j.subSlices.length-
1],w;for(w in f.args)h.args[w]=f.args[w];j.startThread.asyncSlices.push(j);delete c[g][d]}}}}}}};tracing.TimelineModel.registerImporter(d);return{TraceEventImporter:d}});base.exportTo("tracing.importer.linux_perf",function(){function d(a){this.importer=a;this.model=a.model}var c=[];d.registerSubtype=function(a){c.push(a)};d.getSubtypeConstructors=function(){return c};d.prototype={__proto__:Object.prototype};return{Parser:d}});base.require("importer.linux_perf.parser");
base.exportTo("tracing.importer.linux_perf",function(){function d(a){c.call(this,a);a.registerEventHandler("memory_bus_usage",d.prototype.traceMarkWriteBusEvent.bind(this));this.model_=a.model_;this.ppids_={}}var c=tracing.importer.linux_perf.Parser;d.prototype={__proto__:c.prototype,traceMarkWriteBusEvent:function(a,b,e,f,c){c=/bus=(\S+) rw_bytes=(\d+) r_bytes=(\d+) w_bytes=(\d+) cycles=(\d+) ns=(\d+)/.exec(c.details);a=c[1];parseInt(c[2]);e=parseInt(c[3]);b=parseInt(c[4]);parseInt(c[5]);c=parseInt(c[6]);
e=1E9*e/c/1048576;b=1E9*b/c/1048576;c=this.model_.getOrCreateProcess(0).getOrCreateCounter(null,"bus "+a+" read");0==c.numSeries&&(c.seriesNames.push("value"),c.seriesColors.push(tracing.getStringColorId(c.name+".value")));c.timestamps.push(f);c.samples.push(e);c=this.model_.getOrCreateProcess(0).getOrCreateCounter(null,"bus "+a+" write");0==c.numSeries&&(c.seriesNames.push("value"),c.seriesColors.push(tracing.getStringColorId(c.name+".value")));c.timestamps.push(f);c.samples.push(b);return!0}};c.registerSubtype(d);
return{BusParser:d}});base.require("importer.linux_perf.parser");
base.exportTo("tracing.importer.linux_perf",function(){function d(a){c.call(this,a);a.registerEventHandler("clock_set_rate",d.prototype.traceMarkWriteClockEvent.bind(this));this.model_=a.model_;this.ppids_={}}var c=tracing.importer.linux_perf.Parser;d.prototype={__proto__:c.prototype,traceMarkWriteClockEvent:function(a,b,e,c,d){b=/(\S+) state=(\d+) cpu_id=(\d+)/.exec(d.details);a=b[1];b=parseInt(b[2]);a=this.model_.getOrCreateProcess(0).getOrCreateCounter(null,a);0==a.numSeries&&(a.seriesNames.push("value"),
a.seriesColors.push(tracing.getStringColorId(a.name+".value")));a.timestamps.push(c);a.samples.push(b);return!0}};c.registerSubtype(d);return{ClockParser:d}});base.require("importer.linux_perf.parser");
base.exportTo("tracing.importer.linux_perf",function(){function d(b){a.call(this,b);b.registerEventHandler("cpufreq_interactive_up",d.prototype.cpufreqUpDownEvent.bind(this));b.registerEventHandler("cpufreq_interactive_down",d.prototype.cpufreqUpDownEvent.bind(this));b.registerEventHandler("cpufreq_interactive_already",d.prototype.cpufreqTargetEvent.bind(this));b.registerEventHandler("cpufreq_interactive_notyet",d.prototype.cpufreqTargetEvent.bind(this));b.registerEventHandler("cpufreq_interactive_setspeed",
d.prototype.cpufreqTargetEvent.bind(this));b.registerEventHandler("cpufreq_interactive_target",d.prototype.cpufreqTargetEvent.bind(this));b.registerEventHandler("cpufreq_interactive_boost",d.prototype.cpufreqBoostUnboostEvent.bind(this));b.registerEventHandler("cpufreq_interactive_unboost",d.prototype.cpufreqBoostUnboostEvent.bind(this))}function c(a){var e={};a=a.split(/\s+/);for(var c=a.length,d=0;d<c;d++){var k=a[d].split("=");e[k[0]]=parseInt(k[1])}return e}var a=tracing.importer.linux_perf.Parser;
d.prototype={__proto__:a.prototype,cpufreqSlice:function(a,e,c,d){c=this.importer.getOrCreatePseudoThread("cpufreq");c.openSlice=e;a=new tracing.TimelineSlice("",c.openSlice,tracing.getStringColorId(c.openSlice),a,d,0);c.thread.pushSlice(a)},cpufreqBoostSlice:function(a,e,c){var d=this.importer.getOrCreatePseudoThread("cpufreq_boost");d.openSlice=e;a=new tracing.TimelineSlice("",d.openSlice,tracing.getStringColorId(d.openSlice),a,c,0);d.thread.pushSlice(a)},cpufreqUpDownEvent:function(a,e,f,d,k){e=
c(k.details);this.cpufreqSlice(d,a,e.cpu,e);return!0},cpufreqTargetEvent:function(a,e,f,d,k){e=c(k.details);this.cpufreqSlice(d,a,e.cpu,e);return!0},cpufreqBoostUnboostEvent:function(a,e,c,d,k){this.cpufreqBoostSlice(d,a,{type:k.details});return!0}};a.registerSubtype(d);return{CpufreqParser:d}});base.require("importer.linux_perf.parser");
base.exportTo("tracing.importer.linux_perf",function(){function d(a){c.call(this,a);a.registerEventHandler("drm_vblank_event",d.prototype.vblankEvent.bind(this))}var c=tracing.importer.linux_perf.Parser;d.prototype={__proto__:c.prototype,drmVblankSlice:function(a,b,e){var c=this.importer.getOrCreatePseudoThread("drm_vblank");c.openSlice=b;a=new tracing.TimelineSlice("",c.openSlice,tracing.getStringColorId(c.openSlice),a,e,0);c.thread.pushSlice(a)},vblankEvent:function(a,b,e,c,d){b=/crtc=(\d+), seq=(\d+)/.exec(d.details);
if(!b)return!1;a=parseInt(b[1]);b=parseInt(b[2]);this.drmVblankSlice(c,"vblank:"+a,{crtc:a,seq:b});return!0}};c.registerSubtype(d);return{DrmParser:d}});base.require("importer.linux_perf.parser");
base.exportTo("tracing.importer.linux_perf",function(){function d(a){c.call(this,a);a.registerEventHandler("exynos_flip_request",d.prototype.flipEvent.bind(this));a.registerEventHandler("exynos_flip_complete",d.prototype.flipEvent.bind(this));a.registerEventHandler("exynos_busfreq_target_int",d.prototype.busfreqTargetIntEvent.bind(this));a.registerEventHandler("exynos_busfreq_target_mif",d.prototype.busfreqTargetMifEvent.bind(this))}var c=tracing.importer.linux_perf.Parser;d.prototype={__proto__:c.prototype,
exynosFlipOpenSlice:function(a,b){var e=this.importer.getOrCreatePseudoThread("exynos_flip");e.openSliceTS=a;e.openSlice="flip:"+b},exynosFlipCloseSlice:function(a,b){var e=this.importer.getOrCreatePseudoThread("exynos_flip");if(e.openSlice){var c=new tracing.TimelineSlice("",e.openSlice,tracing.getStringColorId(e.openSlice),e.openSliceTS,b,a-e.openSliceTS);e.thread.pushSlice(c)}e.openSlice=void 0},flipEvent:function(a,b,e,c,d){b=/pipe=(\d+)/.exec(d.details);if(!b)return!1;b=parseInt(b[1]);"exynos_flip_request"==
a?this.exynosFlipOpenSlice(c,b):this.exynosFlipCloseSlice(c,{pipe:b});return!0},exynosBusfreqSample:function(a,b,e){a=this.importer.getOrCreateCpuState(0).cpu.getOrCreateCounter("",a);0==a.numSeries&&(a.seriesNames.push("frequency"),a.seriesColors.push(tracing.getStringColorId(a.name+".frequency")));a.timestamps.push(b);a.samples.push(e)},busfreqTargetIntEvent:function(a,b,e,c,d){a=/frequency=(\d+)/.exec(d.details);if(!a)return!1;this.exynosBusfreqSample("INT Frequency",c,parseInt(a[1]));return!0},
busfreqTargetMifEvent:function(a,b,e,c,d){a=/frequency=(\d+)/.exec(d.details);if(!a)return!1;this.exynosBusfreqSample("MIF Frequency",c,parseInt(a[1]));return!0}};c.registerSubtype(d);return{ExynosParser:d}});base.require("importer.linux_perf.parser");
base.exportTo("tracing.importer.linux_perf",function(){function d(a){c.call(this,a);a.registerEventHandler("tracing_mark_write:log",d.prototype.logEvent.bind(this));a.registerEventHandler("tracing_mark_write:SyncInterpret",d.prototype.syncEvent.bind(this));a.registerEventHandler("tracing_mark_write:HandleTimer",d.prototype.timerEvent.bind(this))}var c=tracing.importer.linux_perf.Parser;d.prototype={__proto__:c.prototype,gestureOpenSlice:function(a,b,e){this.importer.getOrCreatePseudoThread("gesture").thread.beginSlice("touchpad_gesture",
a,b,e)},gestureCloseSlice:function(a,b){var e=this.importer.getOrCreatePseudoThread("gesture").thread;if(e.openSliceCount){var c=e.openPartialSlices_[e.openSliceCount-1];c.title!=a?this.importer.importError("Titles do not match. Title is "+c.title+" in openSlice, and is "+a+" in endSlice"):e.endSlice(b)}},logEvent:function(a,b,e,c,d){a=/^\s*(\w+):\s*(\w+)$/.exec(d.details);switch(a[1]){case "start":this.gestureOpenSlice("GestureLog",c,{name:a[2]});break;case "end":this.gestureCloseSlice("GestureLog",
c)}return!0},syncEvent:function(a,b,e,c,d){a=/^\s*(\w+):\s*(\w+)$/.exec(d.details);switch(a[1]){case "start":this.gestureOpenSlice("SyncInterpret",c,{interpreter:a[2]});break;case "end":this.gestureCloseSlice("SyncInterpret",c)}return!0},timerEvent:function(a,b,e,c,d){a=/^\s*(\w+):\s*(\w+)$/.exec(d.details);switch(a[1]){case "start":this.gestureOpenSlice("HandleTimer",c,{interpreter:a[2]});break;case "end":this.gestureCloseSlice("HandleTimer",c)}return!0}};c.registerSubtype(d);return{GestureParser:d}});
base.require("importer.linux_perf.parser");
base.exportTo("tracing.importer.linux_perf",function(){function d(a){c.call(this,a);a.registerEventHandler("i915_gem_object_create",d.prototype.gemObjectCreateEvent.bind(this));a.registerEventHandler("i915_gem_object_bind",d.prototype.gemObjectBindEvent.bind(this));a.registerEventHandler("i915_gem_object_unbind",d.prototype.gemObjectBindEvent.bind(this));a.registerEventHandler("i915_gem_object_change_domain",d.prototype.gemObjectChangeDomainEvent.bind(this));a.registerEventHandler("i915_gem_object_pread",
d.prototype.gemObjectPreadWriteEvent.bind(this));a.registerEventHandler("i915_gem_object_pwrite",d.prototype.gemObjectPreadWriteEvent.bind(this));a.registerEventHandler("i915_gem_object_fault",d.prototype.gemObjectFaultEvent.bind(this));a.registerEventHandler("i915_gem_object_clflush",d.prototype.gemObjectDestroyEvent.bind(this));a.registerEventHandler("i915_gem_object_destroy",d.prototype.gemObjectDestroyEvent.bind(this));a.registerEventHandler("i915_gem_ring_dispatch",d.prototype.gemRingDispatchEvent.bind(this));
a.registerEventHandler("i915_gem_ring_flush",d.prototype.gemRingFlushEvent.bind(this));a.registerEventHandler("i915_gem_request",d.prototype.gemRequestEvent.bind(this));a.registerEventHandler("i915_gem_request_add",d.prototype.gemRequestEvent.bind(this));a.registerEventHandler("i915_gem_request_complete",d.prototype.gemRequestEvent.bind(this));a.registerEventHandler("i915_gem_request_retire",d.prototype.gemRequestEvent.bind(this));a.registerEventHandler("i915_gem_request_wait_begin",d.prototype.gemRequestEvent.bind(this));
a.registerEventHandler("i915_gem_request_wait_end",d.prototype.gemRequestEvent.bind(this));a.registerEventHandler("i915_gem_ring_wait_begin",d.prototype.gemRingWaitEvent.bind(this));a.registerEventHandler("i915_gem_ring_wait_end",d.prototype.gemRingWaitEvent.bind(this));a.registerEventHandler("i915_reg_rw",d.prototype.regRWEvent.bind(this));a.registerEventHandler("i915_flip_request",d.prototype.flipEvent.bind(this));a.registerEventHandler("i915_flip_complete",d.prototype.flipEvent.bind(this))}var c=
tracing.importer.linux_perf.Parser;d.prototype={__proto__:c.prototype,i915FlipOpenSlice:function(a,b,e){var c=this.importer.getOrCreatePseudoThread("i915_flip");c.openSliceTS=a;c.openSlice="flip:"+b+"/"+e},i915FlipCloseSlice:function(a,b){var e=this.importer.getOrCreatePseudoThread("i915_flip");if(e.openSlice){var c=new tracing.TimelineSlice("",e.openSlice,tracing.getStringColorId(e.openSlice),e.openSliceTS,b,a-e.openSliceTS);e.thread.pushSlice(c)}e.openSlice=void 0},i915GemObjectSlice:function(a,
b,e,c){var d=this.importer.getOrCreatePseudoThread("i915_gem");d.openSlice=b+":"+e;a=new tracing.TimelineSlice("",d.openSlice,tracing.getStringColorId(d.openSlice),a,c,0);d.thread.pushSlice(a)},i915GemRingSlice:function(a,b,e,c,d){var k=this.importer.getOrCreatePseudoThread("i915_gem_ring");k.openSlice=b+":"+e+"."+c;a=new tracing.TimelineSlice("",k.openSlice,tracing.getStringColorId(k.openSlice),a,d,0);k.thread.pushSlice(a)},i915RegSlice:function(a,b,e,c){var d=this.importer.getOrCreatePseudoThread("i915_reg");
d.openSlice=b+":"+e;a=new tracing.TimelineSlice("",d.openSlice,tracing.getStringColorId(d.openSlice),a,c,0);d.thread.pushSlice(a)},gemObjectCreateEvent:function(a,b,e,c,d){e=/obj=(\w+), size=(\d+)/.exec(d.details);if(!e)return!1;b=e[1];e=parseInt(e[2]);this.i915GemObjectSlice(c,a,b,{obj:b,size:e});return!0},gemObjectBindEvent:function(a,b,e,c,d){d=/obj=(\w+), offset=(\w+), size=(\d+)/.exec(d.details);if(!d)return!1;b=d[1];e=d[2];d=parseInt(d[3]);this.i915ObjectGemSlice(c,a+":"+b,{obj:b,offset:e,size:d});
return!0},gemObjectChangeDomainEvent:function(a,b,e,c,d){b=/obj=(\w+), read=(\w+=>\w+), write=(\w+=>\w+)/.exec(d.details);if(!b)return!1;e=b[1];this.i915GemObjectSlice(c,a,e,{obj:e,read:b[2],write:b[3]});return!0},gemObjectPreadWriteEvent:function(a,b,e,c,d){d=/obj=(\w+), offset=(\d+), len=(\d+)/.exec(d.details);if(!d)return!1;b=d[1];e=parseInt(d[2]);d=parseInt(d[3]);this.i915GemObjectSlice(c,a,b,{obj:b,offset:e,len:d});return!0},gemObjectFaultEvent:function(a,b,e,c,d){d=/obj=(\w+), (\w+) index=(\d+)/.exec(d.details);
if(!d)return!1;b=d[1];e=d[2];d=parseInt(d[3]);this.i915GemObjectSlice(c,a,b,{obj:b,type:e,index:d});return!0},gemObjectDestroyEvent:function(a,b,e,c,d){b=/obj=(\w+)/.exec(d.details);if(!b)return!1;b=b[1];this.i915GemObjectSlice(c,a,b,{obj:b});return!0},gemRingDispatchEvent:function(a,b,c,f,d){d=/dev=(\d+), ring=(\d+), seqno=(\d+)/.exec(d.details);if(!d)return!1;b=parseInt(d[1]);c=parseInt(d[2]);d=parseInt(d[3]);this.i915GemRingSlice(f,a,b,c,{dev:b,ring:c,seqno:d});return!0},gemRingFlushEvent:function(a,
b,c,f,d){b=/dev=(\d+), ring=(\w+), invalidate=(\w+), flush=(\w+)/.exec(d.details);if(!b)return!1;c=parseInt(b[1]);d=parseInt(b[2]);this.i915GemRingSlice(f,a,c,d,{dev:c,ring:d,invalidate:b[3],flush:b[4]});return!0},gemRequestEvent:function(a,b,c,f,d){d=/dev=(\d+), ring=(\d+), seqno=(\d+)/.exec(d.details);if(!d)return!1;b=parseInt(d[1]);c=parseInt(d[2]);d=parseInt(d[3]);this.i915GemRingSlice(f,a,b,c,{dev:b,ring:c,seqno:d});return!0},gemRingWaitEvent:function(a,b,c,f,d){c=/dev=(\d+), ring=(\d+)/.exec(d.details);
if(!c)return!1;b=parseInt(c[1]);c=parseInt(c[2]);this.i915GemRingSlice(f,a,b,c,{dev:b,ring:c});return!0},regRWEvent:function(a,b,c,f,d){a=/(\w+) reg=(\w+), len=(\d+), val=(\(\w+, \w+\))/.exec(d.details);if(!a)return!1;b=a[1];c=a[2];this.i915RegSlice(f,b,c,{rw:b,reg:c,len:a[3],data:a[3]});return!0},flipEvent:function(a,b,c,f,d){c=/plane=(\d+), obj=(\w+)/.exec(d.details);if(!c)return!1;b=parseInt(c[1]);c=c[2];"i915_flip_request"==a?this.i915FlipOpenSlice(f,c,b):this.i915FlipCloseSlice(f,{obj:c,plane:b});
return!0}};c.registerSubtype(d);return{I915Parser:d}});base.require("importer.linux_perf.parser");
base.exportTo("tracing.importer.linux_perf",function(){function d(a){c.call(this,a);a.registerEventHandler("mali_dvfs_event",d.prototype.dvfsEventEvent.bind(this));a.registerEventHandler("mali_dvfs_set_clock",d.prototype.dvfsSetClockEvent.bind(this));a.registerEventHandler("mali_dvfs_set_voltage",d.prototype.dvfsSetVoltageEvent.bind(this));this.addJMCounter("mali_hwc_MESSAGES_SENT","Messages Sent");this.addJMCounter("mali_hwc_MESSAGES_RECEIVED","Messages Received");this.addJMCycles("mali_hwc_GPU_ACTIVE",
"GPU Active");this.addJMCycles("mali_hwc_IRQ_ACTIVE","IRQ Active");for(var b=0;7>b;b++){var e="JS"+b,f="mali_hwc_"+e;this.addJMCounter(f+"_JOBS",e+" Jobs");this.addJMCounter(f+"_TASKS",e+" Tasks");this.addJMCycles(f+"_ACTIVE",e+" Active");this.addJMCycles(f+"_WAIT_READ",e+" Wait Read");this.addJMCycles(f+"_WAIT_ISSUE",e+" Wait Issue");this.addJMCycles(f+"_WAIT_DEPEND",e+" Wait Depend");this.addJMCycles(f+"_WAIT_FINISH",e+" Wait Finish")}this.addTilerCounter("mali_hwc_TRIANGLES","Triangles");this.addTilerCounter("mali_hwc_QUADS",
"Quads");this.addTilerCounter("mali_hwc_POLYGONS","Polygons");this.addTilerCounter("mali_hwc_POINTS","Points");this.addTilerCounter("mali_hwc_LINES","Lines");this.addTilerCounter("mali_hwc_VCACHE_HIT","VCache Hit");this.addTilerCounter("mali_hwc_VCACHE_MISS","VCache Miss");this.addTilerCounter("mali_hwc_FRONT_FACING","Front Facing");this.addTilerCounter("mali_hwc_BACK_FACING","Back Facing");this.addTilerCounter("mali_hwc_PRIM_VISIBLE","Prim Visible");this.addTilerCounter("mali_hwc_PRIM_CULLED","Prim Culled");
this.addTilerCounter("mali_hwc_PRIM_CLIPPED","Prim Clipped");this.addTilerCounter("mali_hwc_WRBUF_HIT","Wrbuf Hit");this.addTilerCounter("mali_hwc_WRBUF_MISS","Wrbuf Miss");this.addTilerCounter("mali_hwc_WRBUF_LINE","Wrbuf Line");this.addTilerCounter("mali_hwc_WRBUF_PARTIAL","Wrbuf Partial");this.addTilerCounter("mali_hwc_WRBUF_STALL","Wrbuf Stall");this.addTilerCycles("mali_hwc_ACTIVE","Tiler Active");this.addTilerCycles("mali_hwc_INDEX_WAIT","Index Wait");this.addTilerCycles("mali_hwc_INDEX_RANGE_WAIT",
"Index Range Wait");this.addTilerCycles("mali_hwc_VERTEX_WAIT","Vertex Wait");this.addTilerCycles("mali_hwc_PCACHE_WAIT","Pcache Wait");this.addTilerCycles("mali_hwc_WRBUF_WAIT","Wrbuf Wait");this.addTilerCycles("mali_hwc_BUS_READ","Bus Read");this.addTilerCycles("mali_hwc_BUS_WRITE","Bus Write");this.addTilerCycles("mali_hwc_TILER_UTLB_STALL","Tiler UTLB Stall");this.addTilerCycles("mali_hwc_TILER_UTLB_HIT","Tiler UTLB Hit");this.addFragCycles("mali_hwc_FRAG_ACTIVE","Active");this.addFragCounter("mali_hwc_FRAG_PRIMATIVES",
"Primitives");this.addFragCounter("mali_hwc_FRAG_PRIMATIVES_DROPPED","Primitives Dropped");this.addFragCycles("mali_hwc_FRAG_CYCLE_DESC","Descriptor Processing");this.addFragCycles("mali_hwc_FRAG_CYCLES_PLR","PLR Processing??");this.addFragCycles("mali_hwc_FRAG_CYCLES_VERT","Vertex Processing");this.addFragCycles("mali_hwc_FRAG_CYCLES_TRISETUP","Triangle Setup");this.addFragCycles("mali_hwc_FRAG_CYCLES_RAST","Rasterization???");this.addFragCounter("mali_hwc_FRAG_THREADS","Threads");this.addFragCounter("mali_hwc_FRAG_DUMMY_THREADS",
"Dummy Threads");this.addFragCounter("mali_hwc_FRAG_QUADS_RAST","Quads Rast");this.addFragCounter("mali_hwc_FRAG_QUADS_EZS_TEST","Quads EZS Test");this.addFragCounter("mali_hwc_FRAG_QUADS_EZS_KILLED","Quads EZS Killed");this.addFragCounter("mali_hwc_FRAG_QUADS_LZS_TEST","Quads LZS Test");this.addFragCounter("mali_hwc_FRAG_QUADS_LZS_KILLED","Quads LZS Killed");this.addFragCycles("mali_hwc_FRAG_CYCLE_NO_TILE","No Tiles");this.addFragCounter("mali_hwc_FRAG_NUM_TILES","Tiles");this.addFragCounter("mali_hwc_FRAG_TRANS_ELIM",
"Transactions Eliminated");this.addComputeCycles("mali_hwc_COMPUTE_ACTIVE","Active");this.addComputeCounter("mali_hwc_COMPUTE_TASKS","Tasks");this.addComputeCounter("mali_hwc_COMPUTE_THREADS","Threads Started");this.addComputeCycles("mali_hwc_COMPUTE_CYCLES_DESC","Waiting for Descriptors");this.addTripipeCycles("mali_hwc_TRIPIPE_ACTIVE","Active");this.addArithCounter("mali_hwc_ARITH_WORDS","Instructions (/Pipes)");this.addArithCycles("mali_hwc_ARITH_CYCLES_REG","Reg scheduling stalls (/Pipes)");this.addArithCycles("mali_hwc_ARITH_CYCLES_L0",
"L0 cache miss stalls (/Pipes)");this.addArithCounter("mali_hwc_ARITH_FRAG_DEPEND","Frag dep check failures (/Pipes)");this.addLSCounter("mali_hwc_LS_WORDS","Instruction Words Completed");this.addLSCounter("mali_hwc_LS_ISSUES","Full Pipeline Issues");this.addLSCounter("mali_hwc_LS_RESTARTS","Restarts (unpairable insts)");this.addLSCounter("mali_hwc_LS_REISSUES_MISS","Pipeline reissue (cache miss/uTLB)");this.addLSCounter("mali_hwc_LS_REISSUES_VD","Pipeline reissue (varying data)");this.addLSCounter("mali_hwc_LS_REISSUE_ATTRIB_MISS",
"Pipeline reissue (attribute cache miss)");this.addLSCounter("mali_hwc_LS_REISSUE_NO_WB","Writeback not used");this.addTexCounter("mali_hwc_TEX_WORDS","Words");this.addTexCounter("mali_hwc_TEX_BUBBLES","Bubbles");this.addTexCounter("mali_hwc_TEX_WORDS_L0","Words L0");this.addTexCounter("mali_hwc_TEX_WORDS_DESC","Words Desc");this.addTexCounter("mali_hwc_TEX_THREADS","Threads");this.addTexCounter("mali_hwc_TEX_RECIRC_FMISS","Recirc due to Full Miss");this.addTexCounter("mali_hwc_TEX_RECIRC_DESC","Recirc due to Desc Miss");
this.addTexCounter("mali_hwc_TEX_RECIRC_MULTI","Recirc due to Multipass");this.addTexCounter("mali_hwc_TEX_RECIRC_PMISS","Recirc due to Partial Cache Miss");this.addTexCounter("mali_hwc_TEX_RECIRC_CONF","Recirc due to Cache Conflict");this.addLSCCounter("mali_hwc_LSC_READ_HITS","Read Hits");this.addLSCCounter("mali_hwc_LSC_READ_MISSES","Read Misses");this.addLSCCounter("mali_hwc_LSC_WRITE_HITS","Write Hits");this.addLSCCounter("mali_hwc_LSC_WRITE_MISSES","Write Misses");this.addLSCCounter("mali_hwc_LSC_ATOMIC_HITS",
"Atomic Hits");this.addLSCCounter("mali_hwc_LSC_ATOMIC_MISSES","Atomic Misses");this.addLSCCounter("mali_hwc_LSC_LINE_FETCHES","Line Fetches");this.addLSCCounter("mali_hwc_LSC_DIRTY_LINE","Dirty Lines");this.addLSCCounter("mali_hwc_LSC_SNOOPS","Snoops");this.addAXICounter("mali_hwc_AXI_TLB_STALL","Address channel stall");this.addAXICounter("mali_hwc_AXI_TLB_MISS","Cache Miss");this.addAXICounter("mali_hwc_AXI_TLB_TRANSACTION","Transactions");this.addAXICounter("mali_hwc_LS_TLB_MISS","LS Cache Miss");
this.addAXICounter("mali_hwc_LS_TLB_HIT","LS Cache Hit");this.addAXICounter("mali_hwc_AXI_BEATS_READ","Read Beats");this.addAXICounter("mali_hwc_AXI_BEATS_WRITE","Write Beats");this.addMMUCounter("mali_hwc_MMU_TABLE_WALK","Page Table Walks");this.addMMUCounter("mali_hwc_MMU_REPLAY_MISS","Cache Miss from Replay Buffer");this.addMMUCounter("mali_hwc_MMU_REPLAY_FULL","Replay Buffer Full");this.addMMUCounter("mali_hwc_MMU_NEW_MISS","Cache Miss on New Request");this.addMMUCounter("mali_hwc_MMU_HIT","Cache Hit");
this.addMMUCycles("mali_hwc_UTLB_STALL","UTLB Stalled");this.addMMUCycles("mali_hwc_UTLB_REPLAY_MISS","UTLB Replay Miss");this.addMMUCycles("mali_hwc_UTLB_REPLAY_FULL","UTLB Replay Full");this.addMMUCycles("mali_hwc_UTLB_NEW_MISS","UTLB New Miss");this.addMMUCycles("mali_hwc_UTLB_HIT","UTLB Hit");this.addL2Counter("mali_hwc_L2_READ_BEATS","Read Beats");this.addL2Counter("mali_hwc_L2_WRITE_BEATS","Write Beats");this.addL2Counter("mali_hwc_L2_ANY_LOOKUP","Any Lookup");this.addL2Counter("mali_hwc_L2_READ_LOOKUP",
"Read Lookup");this.addL2Counter("mali_hwc_L2_SREAD_LOOKUP","Shareable Read Lookup");this.addL2Counter("mali_hwc_L2_READ_REPLAY","Read Replayed");this.addL2Counter("mali_hwc_L2_READ_SNOOP","Read Snoop");this.addL2Counter("mali_hwc_L2_READ_HIT","Read Cache Hit");this.addL2Counter("mali_hwc_L2_CLEAN_MISS","CleanUnique Miss");this.addL2Counter("mali_hwc_L2_WRITE_LOOKUP","Write Lookup");this.addL2Counter("mali_hwc_L2_SWRITE_LOOKUP","Shareable Write Lookup");this.addL2Counter("mali_hwc_L2_WRITE_REPLAY",
"Write Replayed");this.addL2Counter("mali_hwc_L2_WRITE_SNOOP","Write Snoop");this.addL2Counter("mali_hwc_L2_WRITE_HIT","Write Cache Hit");this.addL2Counter("mali_hwc_L2_EXT_READ_FULL","ExtRD with BIU Full");this.addL2Counter("mali_hwc_L2_EXT_READ_HALF","ExtRD with BIU >1/2 Full");this.addL2Counter("mali_hwc_L2_EXT_WRITE_FULL","ExtWR with BIU Full");this.addL2Counter("mali_hwc_L2_EXT_WRITE_HALF","ExtWR with BIU >1/2 Full");this.addL2Counter("mali_hwc_L2_EXT_READ","External Read (ExtRD)");this.addL2Counter("mali_hwc_L2_EXT_READ_LINE",
"ExtRD (linefill)");this.addL2Counter("mali_hwc_L2_EXT_WRITE","External Write (ExtWR)");this.addL2Counter("mali_hwc_L2_EXT_WRITE_LINE","ExtWR (linefill)");this.addL2Counter("mali_hwc_L2_EXT_WRITE_SMALL","ExtWR (burst size <64B)");this.addL2Counter("mali_hwc_L2_EXT_BARRIER","External Barrier");this.addL2Counter("mali_hwc_L2_EXT_AR_STALL","Address Read stalls");this.addL2Counter("mali_hwc_L2_EXT_R_BUF_FULL","Response Buffer full stalls");this.addL2Counter("mali_hwc_L2_EXT_RD_BUF_FULL","Read Data Buffer full stalls");
this.addL2Counter("mali_hwc_L2_EXT_R_RAW","RAW hazard stalls");this.addL2Counter("mali_hwc_L2_EXT_W_STALL","Write Data stalls");this.addL2Counter("mali_hwc_L2_EXT_W_BUF_FULL","Write Data Buffer full");this.addL2Counter("mali_hwc_L2_EXT_R_W_HAZARD","WAW or WAR hazard stalls");this.addL2Counter("mali_hwc_L2_TAG_HAZARD","Tag hazard replays");this.addL2Cycles("mali_hwc_L2_SNOOP_FULL","Snoop buffer full");this.addL2Cycles("mali_hwc_L2_REPLAY_FULL","Replay buffer full");a.registerEventHandler("tracing_mark_write:mali_driver",
d.prototype.maliDDKEvent.bind(this));this.model_=a.model_}var c=tracing.importer.linux_perf.Parser;d.prototype={__proto__:c.prototype,maliDDKOpenSlice:function(a,b,c,f,d){a=this.importer.model_.getOrCreateProcess(a).getOrCreateThread(b);f=/^([\w\d_]*)(?:\(\))?:?\s*(.*)$/.exec(f);a.beginSlice("gpu-driver",f[1],c,{args:f[2],blockinfo:d})},maliDDKCloseSlice:function(a,b,c){a=this.importer.model_.getOrCreateProcess(a).getOrCreateThread(b);a.openSliceCount&&a.endSlice(c)},autoDetectLineRE:function(a){var b=
/^\s*\(([\w\-]*)\)\s*(\w+):\s*([\w\\\/\.\-]*@\d*):?\s*(.*)$/;if(b.test(a))return b;b=/^s*()(\w+):\s*([\w\\\/.\-]*):?\s*(.*)$/;return b.test(a)?b:null},lineRE:null,maliDDKEvent:function(a,b,c,f,d){if(null==this.lineRE&&(this.lineRE=this.autoDetectLineRE(d.details),null==this.lineRE))return!1;a=this.lineRE.exec(d.details);b=""===a[1]?"mali":a[1];switch(a[2]){case "cros_trace_print_enter":this.maliDDKOpenSlice(c,b,f,a[4],a[3]);break;case "cros_trace_print_exit":this.maliDDKCloseSlice(c,b,f,[],a[3])}return!0},
dvfsSample:function(a,b,c,f){f=parseInt(f);a=this.model_.getOrCreateProcess(0).getOrCreateCounter("DVFS",a);0==a.numSeries&&(a.seriesNames.push(b),a.seriesColors.push(tracing.getStringColorId(a.name)));a.timestamps.push(c);a.samples.push(f)},dvfsEventEvent:function(a,b,c,f,d){a=/utilization=(\d+)/.exec(d.details);if(!a)return!1;this.dvfsSample("DVFS Utilization","utilization",f,a[1]);return!0},dvfsSetClockEvent:function(a,b,c,f,d){a=/frequency=(\d+)/.exec(d.details);if(!a)return!1;this.dvfsSample("DVFS Frequency",
"frequency",f,a[1]);return!0},dvfsSetVoltageEvent:function(a,b,c,f,d){a=/voltage=(\d+)/.exec(d.details);if(!a)return!1;this.dvfsSample("DVFS Voltage","voltage",f,a[1]);return!0},hwcSample:function(a,b,c,f,d){d=/val=(\d+)/.exec(d.details);if(!d)return!1;d=parseInt(d[1]);a=this.model_.getOrCreateProcess(0).getOrCreateCounter(a,b);0==a.numSeries&&(a.seriesNames.push(c),a.seriesColors.push(tracing.getStringColorId(a.name)));a.timestamps.push(f);a.samples.push(d);return!0},jmSample:function(a,b,c,f){return this.hwcSample("mali:jm",
"JM: "+a,b,c,f)},addJMCounter:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,k,h){return this.jmSample(b,"count",k,h)}.bind(this))},addJMCycles:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,k,h){return this.jmSample(b,"cycles",k,h)}.bind(this))},tilerSample:function(a,b,c,f){return this.hwcSample("mali:tiler","Tiler: "+a,b,c,f)},addTilerCounter:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,k,h){return this.tilerSample(b,"count",k,h)}.bind(this))},
addTilerCycles:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,k,h){return this.tilerSample(b,"cycles",k,h)}.bind(this))},fragSample:function(a,b,c,f){return this.hwcSample("mali:fragment","Fragment: "+a,b,c,f)},addFragCounter:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,k,h){return this.fragSample(b,"count",k,h)}.bind(this))},addFragCycles:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,k,h){return this.fragSample(b,"cycles",k,h)}.bind(this))},
computeSample:function(a,b,c,f){return this.hwcSample("mali:compute","Compute: "+a,b,c,f)},addComputeCounter:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,k,h){return this.computeSample(b,"count",k,h)}.bind(this))},addComputeCycles:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,k,h){return this.computeSample(b,"cycles",k,h)}.bind(this))},addTripipeCycles:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,k,h){return this.hwcSample("mali:shader",
"Tripipe: "+b,"cycles",k,h)}.bind(this))},arithSample:function(a,b,c,f){return this.hwcSample("mali:arith","Arith: "+a,b,c,f)},addArithCounter:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,k,h){return this.arithSample(b,"count",k,h)}.bind(this))},addArithCycles:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,k,h){return this.arithSample(b,"cycles",k,h)}.bind(this))},addLSCounter:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,k,h){return this.hwcSample("mali:ls",
"LS: "+b,"count",k,h)}.bind(this))},textureSample:function(a,b,c,f){return this.hwcSample("mali:texture","Texture: "+a,b,c,f)},addTexCounter:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,k,h){return this.textureSample(b,"count",k,h)}.bind(this))},addLSCCounter:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,k,h){return this.hwcSample("mali:lsc","LSC: "+b,"count",k,h)}.bind(this))},addAXICounter:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,
k,h){return this.hwcSample("mali:axi","AXI: "+b,"count",k,h)}.bind(this))},mmuSample:function(a,b,c,f){return this.hwcSample("mali:mmu","MMU: "+a,b,c,f)},addMMUCounter:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,k,h){return this.mmuSample(b,"count",k,h)}.bind(this))},addMMUCycles:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,k,h){return this.mmuSample(b,"cycles",k,h)}.bind(this))},l2Sample:function(a,b,c,f){return this.hwcSample("mali:l2","L2: "+a,b,c,f)},
addL2Counter:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,k,h){return this.l2Sample(b,"count",k,h)}.bind(this))},addL2Cycles:function(a,b){this.importer.registerEventHandler(a,function(a,c,d,k,h){return this.l2Sample(b,"cycles",k,h)}.bind(this))}};c.registerSubtype(d);return{MaliParser:d}});base.require("importer.linux_perf.parser");
base.exportTo("tracing.importer.linux_perf",function(){function d(a){c.call(this,a);a.registerEventHandler("power_start",d.prototype.powerStartEvent.bind(this));a.registerEventHandler("power_frequency",d.prototype.powerFrequencyEvent.bind(this));a.registerEventHandler("cpu_frequency",d.prototype.cpuFrequencyEvent.bind(this));a.registerEventHandler("cpu_idle",d.prototype.cpuIdleEvent.bind(this))}var c=tracing.importer.linux_perf.Parser;d.prototype={__proto__:c.prototype,cpuStateSlice:function(a,b,
c,d){b=this.importer.getOrCreateCpuState(b);"1"!=c?this.importer.importError("Don't understand power_start events of type "+c):(c=b.cpu.getOrCreateCounter("","C-State"),0==c.numSeries&&(c.seriesNames.push("state"),c.seriesColors.push(tracing.getStringColorId(c.name+".state"))),c.timestamps.push(a),c.samples.push(d))},cpuIdleSlice:function(a,b,c){b=this.importer.getOrCreateCpuState(b).cpu.getOrCreateCounter("","C-State");0==b.numSeries&&(b.seriesNames.push("state"),b.seriesColors.push(tracing.getStringColorId(b.name)));
4294967295!=c?b.samples.push(c):b.samples.push(0);b.timestamps.push(a)},cpuFrequencySlice:function(a,b,c){b=this.importer.getOrCreateCpuState(b).cpu.getOrCreateCounter("","Clock Frequency");0==b.numSeries&&(b.seriesNames.push("state"),b.seriesColors.push(tracing.getStringColorId(b.name+".state")));b.timestamps.push(a);b.samples.push(c)},powerStartEvent:function(a,b,c,d,g){a=/type=(\d+) state=(\d) cpu_id=(\d)+/.exec(g.details);if(!a)return!1;b=parseInt(a[3]);c=parseInt(a[2]);this.cpuStateSlice(d,b,
a[1],c);return!0},powerFrequencyEvent:function(a,b,c,d,g){b=/type=(\d+) state=(\d+) cpu_id=(\d)+/.exec(g.details);if(!b)return!1;a=parseInt(b[3]);b=parseInt(b[2]);this.cpuFrequencySlice(d,a,b);return!0},cpuFrequencyEvent:function(a,b,c,d,g){b=/state=(\d+) cpu_id=(\d)+/.exec(g.details);if(!b)return!1;a=parseInt(b[2]);b=parseInt(b[1]);this.cpuFrequencySlice(d,a,b);return!0},cpuIdleEvent:function(a,b,c,d,g){b=/state=(\d+) cpu_id=(\d)+/.exec(g.details);if(!b)return!1;a=parseInt(b[2]);b=parseInt(b[1]);
this.cpuIdleSlice(d,a,b);return!0}};c.registerSubtype(d);return{PowerParser:d}});base.require("importer.linux_perf.parser");
base.exportTo("tracing.importer.linux_perf",function(){function d(a){c.call(this,a);a.registerEventHandler("sched_switch",d.prototype.schedSwitchEvent.bind(this));a.registerEventHandler("sched_wakeup",d.prototype.schedWakeupEvent.bind(this))}var c=tracing.importer.linux_perf.Parser;TestExports={};var a=RegExp("prev_comm=(.+) prev_pid=(\\d+) prev_prio=(\\d+) prev_state=(\\S\\+?|\\S\\|\\S) ==> next_comm=(.+) next_pid=(\\d+) next_prio=(\\d+)");TestExports.schedSwitchRE=a;var b=/comm=(.+) pid=(\d+) prio=(\d+) success=(\d+) target_cpu=(\d+)/;
TestExports.schedWakeupRE=b;d.prototype={__proto__:c.prototype,schedSwitchEvent:function(b,c,d,k,h){var j=a.exec(h.details);if(!j)return!1;b=j[4];d=j[5];h=parseInt(j[6]);j=parseInt(j[7]);this.importer.getOrCreateCpuState(c).switchRunningLinuxPid(this.importer,b,k,h,d,j);return!0},schedWakeupEvent:function(a,c,d,k,h){h=b.exec(h.details);if(!h)return!1;a=d;c=h[1];d=parseInt(h[2]);h=parseInt(h[3]);this.importer.markPidRunnable(k,d,c,h,a);return!0}};c.registerSubtype(d);return{SchedParser:d,_SchedParserTestExports:TestExports}});
base.require("importer.linux_perf.parser");
base.exportTo("tracing.importer.linux_perf",function(){function d(a){c.call(this,a);a.registerEventHandler("workqueue_execute_start",d.prototype.executeStartEvent.bind(this));a.registerEventHandler("workqueue_execute_end",d.prototype.executeEndEvent.bind(this));a.registerEventHandler("workqueue_queue_work",d.prototype.executeQueueWork.bind(this));a.registerEventHandler("workqueue_activate_work",d.prototype.executeActivateWork.bind(this))}var c=tracing.importer.linux_perf.Parser,a=/work struct (.+): function (\S+)/,
b=/work struct (.+)/;d.prototype={__proto__:c.prototype,executeStartEvent:function(b,c,d,k,h){b=a.exec(h.details);if(!b)return!1;d=this.importer.getOrCreateKernelThread(h.threadName,d,d);d.openSliceTS=k;d.openSlice=b[2];return!0},executeEndEvent:function(a,c,d,k,h){if(!b.exec(h.details))return!1;a=this.importer.getOrCreateKernelThread(h.threadName,d,d);a.openSlice&&(k=new tracing.TimelineSlice("",a.openSlice,tracing.getStringColorId(a.openSlice),a.openSliceTS,{},k-a.openSliceTS),a.thread.pushSlice(k));
a.openSlice=void 0;return!0},executeQueueWork:function(){return!0},executeActivateWork:function(){return!0}};c.registerSubtype(d);return{WorkqueueParser:d}});base.require("importer.linux_perf.parser");
base.exportTo("tracing.importer.linux_perf",function(){function d(b){a.call(this,b);b.registerEventHandler("tracing_mark_write:android",d.prototype.traceMarkWriteAndroidEvent.bind(this));b.registerEventHandler("0:android",d.prototype.traceMarkWriteAndroidEvent.bind(this));this.model_=b.model_;this.ppids_={}}function c(a){var c={};if(a){a=a.split(";");for(var d=0;d<a.length;++d){var g=a[d].split("=");g[0]&&(c[g.shift()]=g.join("="))}}return c}var a=tracing.importer.linux_perf.Parser;d.prototype={__proto__:a.prototype,
traceMarkWriteAndroidEvent:function(a,d,f,g,k){a=k.details.split("|");switch(a[0]){case "B":d=parseInt(a[1]);var h=a[4],j=a[2],l=this.model_.getOrCreateProcess(d).getOrCreateThread(f);l.name=k.threadName;if(!l.isTimestampValidForBeginOrEnd(g))return this.model_.importErrors.push("Timestamps are moving backward."),!1;this.ppids_[f]=d;l.beginSlice(h,j,g,c(a[3]));break;case "E":d=this.ppids_[f];if(void 0===d)break;l=this.model_.getOrCreateProcess(d).getOrCreateThread(f);if(!l.openSliceCount)break;g=
l.endSlice(g);a=c(a[3]);for(h in a)void 0!==g.args[h]&&this.model_.importErrors.push("Both the B and E events of "+g.title+"provided values for argument "+h+". The value of the E event will be used."),g.args[h]=a[h];break;case "C":d=parseInt(a[1]);k=a[2];f=parseInt(a[3]);h=a[4];a=this.model_.getOrCreateProcess(d).getOrCreateCounter(h,k);0==a.numSeries&&(a.seriesNames.push("value"),a.seriesColors.push(tracing.getStringColorId(a.name+".value")));a.timestamps.push(g);a.samples.push(f);break;default:return!1}return!0}};
a.registerSubtype(d);return{AndroidParser:d}});"use strict";base.require("timeline_model");base.require("timeline_color_scheme");base.require("importer.linux_perf.bus_parser");base.require("importer.linux_perf.clock_parser");base.require("importer.linux_perf.cpufreq_parser");base.require("importer.linux_perf.drm_parser");base.require("importer.linux_perf.exynos_parser");base.require("importer.linux_perf.gesture_parser");base.require("importer.linux_perf.i915_parser");base.require("importer.linux_perf.mali_parser");
base.require("importer.linux_perf.power_parser");base.require("importer.linux_perf.sched_parser");base.require("importer.linux_perf.workqueue_parser");base.require("importer.linux_perf.android_parser");
base.exportTo("tracing.importer",function(){function d(a){this.cpu=a}function c(a,b){this.importPriority=2;this.model_=a;this.events_=b;this.clockSyncRecords_=[];this.cpuStates_={};this.wakeups_=[];this.kernelThreadStates_={};this.buildMapFromLinuxPidsToTimelineThreads();this.lineNumberBase=0;this.lineNumber=-1;this.pseudoThreadCounter=1;this.parsers_=[];this.eventHandlers_={}}function a(a){return b.test(a)?e:f.test(a)?g:k.test(a)?h:null}d.prototype={__proto__:Object.prototype,switchRunningLinuxPid:function(a,
b,c,d,e,f){if(void 0!==this.lastActivePid&&0!=this.lastActivePid){var g=c-this.lastActiveTs;a=(a=a.threadsByLinuxPid[this.lastActivePid])?a.userFriendlyName:this.lastActiveComm;b=new tracing.TimelineSlice("",a,tracing.getStringColorId(a),this.lastActiveTs,{comm:this.lastActiveComm,tid:this.lastActivePid,prio:this.lastActivePrio,stateWhenDescheduled:b},g);this.cpu.slices.push(b)}this.lastActiveTs=c;this.lastActivePid=d;this.lastActiveComm=e;this.lastActivePrio=f}};TestExports={};var b=RegExp("^\\s*(.+)-(\\d+)\\s+\\(\\s*(\\d+|-+)\\)\\s\\[(\\d+)\\]\\s+[dX.][N.][Hhs.][0-9a-f.]\\s+(\\d+\\.\\d+):\\s+(\\S+):\\s(.*)$"),
e=function(a){a=b.exec(a);if(!a)return a;var c=a[3];"-"===c[0]&&(c=void 0);return{threadName:a[1],pid:a[2],tgid:c,cpuNumber:a[4],timestamp:a[5],eventName:a[6],details:a[7]}};TestExports.lineParserWithTGID=e;var f=/^\s*(.+)-(\d+)\s+\[(\d+)\]\s+[dX.][N.][Hhs.][0-9a-f.]\s+(\d+\.\d+):\s+(\S+):\s(.*)$/,g=function(a){a=f.exec(a);return!a?a:{threadName:a[1],pid:a[2],cpuNumber:a[3],timestamp:a[4],eventName:a[5],details:a[6]}};TestExports.lineParserWithIRQInfo=g;var k=/^\s*(.+)-(\d+)\s+\[(\d+)\]\s*(\d+\.\d+):\s+(\S+):\s(.*)$/,
h=function(a){a=k.exec(a);return!a?a:{threadName:a[1],pid:a[2],cpuNumber:a[3],timestamp:a[4],eventName:a[5],details:a[6]}};TestExports.lineParserWithLegacyFmt=h;TestExports.traceEventClockSyncRE=/trace_event_clock_sync: parent_ts=(\d+\.?\d*)/;TestExports.autoDetectLineParser=a;c.canImport=function(b){if(!("string"===typeof b||b instanceof String))return!1;if(c._extractEventsFromSystraceHTML(b,!1).ok||/^# tracer:/.test(b))return!0;var d=/^(.+)\n/.exec(b);d&&(b=d[1]);return a(b)?!0:!1};c._extractEventsFromSystraceHTML=
function(a,b){function c(a){for(;g<f.length;g++)if(a.test(f[g]))return!0;return!1}function d(a,b){return-1===a.indexOf(b,a.length-b.length)?a:a.substring(a,a.length-b.length)}var e={ok:!1};void 0===b&&(b=!0);if(!1==/^<!DOCTYPE HTML>/.test(a))return e;var f=a.split("\n"),g=1;if(!c(/^  <script>$/)||!c(/^  var linuxPerfData = "\\$/))return e;var h=g+1;if(!c(/^  <\/script>$/))return e;var k=g;if(!c(/^<\/body>$/)||!c(/^<\/html>$/))return e;var u=f.slice(h,k),k=[];if(b)for(var v=0;v<u.length;v++){var x=
u[v],x=d(x,"\\n\\");k.push(x)}else k=[u[u.length-1]];u=k[k.length-1];v=d(u,'\\n";');if(v==u)return e;k[k.length-1]=v;return{ok:!0,lines:b?k:void 0,events_begin_at_line:h}};c.prototype={__proto__:Object.prototype,get model(){return this.model_},buildMapFromLinuxPidsToTimelineThreads:function(){this.threadsByLinuxPid={};this.model_.getAllThreads().forEach(function(a){this.threadsByLinuxPid[a.tid]=a}.bind(this))},getOrCreateCpuState:function(a){if(!this.cpuStates_[a]){var b=this.model_.getOrCreateCpu(a);
this.cpuStates_[a]=new d(b)}return this.cpuStates_[a]},getOrCreateKernelThread:function(a,b,c){this.kernelThreadStates_[a]||(c=this.model_.getOrCreateProcess(b).getOrCreateThread(c),c.name=a,this.kernelThreadStates_[a]={pid:b,thread:c,openSlice:void 0,openSliceTS:void 0},this.threadsByLinuxPid[b]=c);return this.kernelThreadStates_[a]},getOrCreatePseudoThread:function(a){var b=this.kernelThreadStates_[a];b||(b=this.getOrCreateKernelThread(a,0,this.pseudoThreadCounter),this.pseudoThreadCounter++);return b},
importEvents:function(a){this.createParsers();this.importCpuData();this.alignClocks(a)&&(this.buildMapFromLinuxPidsToTimelineThreads(),this.buildPerThreadCpuSlicesFromCpuState())},finalizeImport:function(){},buildPerThreadCpuSlicesFromCpuState:function(){for(var a in this.cpuStates_)for(var b=this.cpuStates_[a].cpu,c=0;c<b.slices.length;c++){var d=b.slices[c],e=this.threadsByLinuxPid[d.args.tid];e&&(e.tempCpuSlices||(e.tempCpuSlices=[]),e.tempCpuSlices.push(d))}for(c in this.wakeups_)if(a=this.wakeups_[c],
e=this.threadsByLinuxPid[a.tid])e.tempWakeups=e.tempWakeups||[],e.tempWakeups.push(a);var f=tracing.getColorIdByName("running"),g=tracing.getColorIdByName("runnable"),h=tracing.getColorIdByName("sleeping"),k=tracing.getColorIdByName("iowait");this.model_.getAllThreads().forEach(function(a){if(void 0!==a.tempCpuSlices){var b=a.tempCpuSlices;delete a.tempCpuSlices;b.sort(function(a,b){return a.start-b.start});var c=a.tempWakeups||[];delete a.tempWakeups;c.sort(function(a,b){return a.ts-b.ts});var d=
[];if(b.length){var e=b[0];d.push(new tracing.TimelineSlice("","Running",f,e.start,{},e.duration))}for(var j=void 0,e=1;e<b.length;e++){for(var l=b[e-1],m=b[e],q=m.start-l.end;c.length&&c[0].ts<m.start;)j=c.shift();var w=function(a,b){void 0!==j&&(q=j.ts-l.end);d.push(new tracing.TimelineSlice("",a,b,l.end,{},q));void 0!==j&&(d.push(new tracing.TimelineSlice("","Runnable",g,j.ts,{"wakeup from tid":j.fromTid},m.start-j.ts)),j=void 0)};if("S"==l.args.stateWhenDescheduled)w("Sleeping",h);else if("R"==
l.args.stateWhenDescheduled||"R+"==l.args.stateWhenDescheduled)d.push(new tracing.TimelineSlice("","Runnable",g,l.end,{},q));else if("D"==l.args.stateWhenDescheduled)w("Uninterruptible Sleep",k);else if("T"==l.args.stateWhenDescheduled)d.push(new tracing.TimelineSlice("","__TASK_STOPPED",k,l.end,{},q));else if("t"==l.args.stateWhenDescheduled)d.push(new tracing.TimelineSlice("","debug",k,l.end,{},q));else if("Z"==l.args.stateWhenDescheduled)d.push(new tracing.TimelineSlice("","Zombie",k,l.end,{},
q));else if("X"==l.args.stateWhenDescheduled)d.push(new tracing.TimelineSlice("","Exit Dead",k,l.end,{},q));else if("x"==l.args.stateWhenDescheduled)d.push(new tracing.TimelineSlice("","Task Dead",k,l.end,{},q));else if("W"==l.args.stateWhenDescheduled)d.push(new tracing.TimelineSlice("","WakeKill",k,l.end,{},q));else if("D|W"==l.args.stateWhenDescheduled)w("Uninterruptable Sleep | WakeKill",k);else throw Error("Unrecognized state: ")+l.args.stateWhenDescheduled;d.push(new tracing.TimelineSlice("",
"Running",f,m.start,{},m.duration))}a.cpuSlices=d}})},alignClocks:function(a){if(0==this.clockSyncRecords_.length){if(!a)return!0;this.abortImport();return!1}a=this.clockSyncRecords_[0];if(0==a.parentTS||a.parentTS==a.perfTS)return!0;a=a.parentTS-a.perfTS;for(var b in this.cpuStates_){for(var c=this.cpuStates_[b].cpu,d=0;d<c.slices.length;d++){var e=c.slices[d];e.start+=a;e.duration=e.duration}for(var f in c.counters){d=c.counters[f];for(e=0;e<d.timestamps.length;e++)d.timestamps[e]+=a}}for(var g in this.kernelThreadStates_)this.kernelThreadStates_[g].thread.shiftTimestampsForward(a);
return!0},abortImport:function(){if(this.pushedEventsToThreads)throw Error("Cannot abort, have alrady pushedCpuDataToThreads.");for(var a in this.cpuStates_)delete this.model_.cpus[a];for(var b in this.kernelThreadStates_){a=this.kernelThreadStates_[b].thread;var c=a.parent;delete c.threads[a.tid];delete this.model_.processes[c.pid]}this.model_.importErrors.push("Cannot import kernel trace without a clock sync.")},createParsers:function(){for(var a=tracing.importer.linux_perf.Parser.getSubtypeConstructors(),
b=0;b<a.length;++b)this.parsers_.push(new a[b](this));this.registerEventHandler("tracing_mark_write:trace_event_clock_sync",c.prototype.traceClockSyncEvent.bind(this));this.registerEventHandler("tracing_mark_write",c.prototype.traceMarkingWriteEvent.bind(this));this.registerEventHandler("0:trace_event_clock_sync",c.prototype.traceClockSyncEvent.bind(this));this.registerEventHandler("0",c.prototype.traceMarkingWriteEvent.bind(this))},registerEventHandler:function(a,b){this.eventHandlers_[a]=b},markPidRunnable:function(a,
b,c,d,e){this.wakeups_.push({ts:a,tid:b,fromTid:e})},importError:function(a){this.model_.importErrors.push("Line "+(this.lineNumberBase+this.lineNumber+1)+": "+a)},traceClockSyncEvent:function(a,b,c,d,e){a=/parent_ts=(\d+\.?\d*)/.exec(e.details);if(!a)return!1;this.clockSyncRecords_.push({perfTS:d,parentTS:1E3*a[1]});return!0},traceMarkingWriteEvent:function(a,b,c,d,e,f){var g=/^\s*(\w+):\s*(.*)$/.exec(e.details);if(g)e.subEventName=g[1],e.details=g[2];else if(g=e.details.substring(0,2),"B|"==g||
"E"==g||"E|"==g||"C|"==g)e.subEventName="android";else return!1;a=a+":"+e.subEventName;g=this.eventHandlers_[a];return!g?(this.importError("Unknown trace_marking_write event "+a),!0):g(a,b,c,d,e,f)},importCpuData:function(){var b=c._extractEventsFromSystraceHTML(this.events_,!0);b.ok?(this.lineNumberBase=b.events_begin_at_line,this.lines_=b.lines):(this.lineNumberBase=0,this.lines_=this.events_.split("\n"));b=null;for(this.lineNumber=0;this.lineNumber<this.lines_.length;++this.lineNumber){var d=this.lines_[this.lineNumber];
if(!(0==d.length||/^#/.test(d))){if(null==b&&(b=a(d),null==b)){this.importError("Cannot parse line: "+d);continue}var e=b(d);if(e){var f=parseInt(e.pid),g=parseInt(e.cpuNumber),h=1E3*parseFloat(e.timestamp),k=e.eventName,t=this.eventHandlers_[k];t?t(k,g,f,h,e)||this.importError("Malformed "+k+" event ("+d+")"):this.importError("Unknown event "+k+" ("+d+")")}else this.importError("Unrecognized line: "+d)}}}};tracing.TimelineModel.registerImporter(c);return{LinuxPerfImporter:c,_LinuxPerfImporterTestExports:TestExports}});
"use strict";
base.exportTo("base",function(){function d(){this.storage_=a?a:"G_testRunner"in global?new c:localStorage}function c(){}var a=void 0;d.setAlternativeStorageInstance=function(b){a=b};d.prototype={get:function(a,c,d){a=this.namespace_(a,d);a=this.storage_.getItem(a);return void 0===a?c:String(a)},set:function(a,c,d){this.storage_.setItem(this.namespace_(a,d),String(c))},keys:function(a){var c=[];a=a||"";for(var d=0;d<this.storage_.length;d++){var g=this.storage_.key(d);this.isnamespaced_(g,a)&&c.push(this.unnamespace_(g,
a))}return c},isnamespaced_:function(a,c){return 0==a.indexOf(this.normalize_(c))},namespace_:function(a,c){return this.normalize_(c)+a},unnamespace_:function(a,c){return a.replace(this.normalize_(c),"")},normalize_:function(a){return d.NAMESPACE+(a?a+".":"")}};d.NAMESPACE="trace-viewer";c.prototype={__proto__:Object.prototype,getItem:function(a){return this[a]},setItem:function(a,c){this[a]=c},key:function(a){return Object.keys(this).sort()[a]},get length(){return Object.keys(this).length}};return{Settings:d}});
"use strict";base.requireStylesheet("timeline_view");base.require("timeline");base.require("timeline_analysis");base.require("timeline_category_filter_dialog");base.require("timeline_filter");base.require("timeline_find_control");base.require("overlay");base.require("importer.trace_event_importer");base.require("importer.linux_perf_importer");base.require("settings");
base.exportTo("tracing",function(){var d=base.ui.define("div");d.prototype={__proto__:HTMLDivElement.prototype,decorate:function(){this.classList.add("timeline-view");this.titleEl_=document.createElement("div");this.titleEl_.textContent="Tracing: ";this.titleEl_.className="title";this.controlDiv_=document.createElement("div");this.controlDiv_.className="control";this.leftControlsEl_=document.createElement("div");this.leftControlsEl_.className="controls";this.rightControlsEl_=document.createElement("div");
this.rightControlsEl_.className="controls";var a=document.createElement("div");a.className="spacer";this.timelineContainer_=document.createElement("div");this.timelineContainer_.className="timeline-container";var b=document.createElement("div");b.className="analysis-container";this.analysisEl_=new tracing.TimelineAnalysisView;this.dragEl_=new c;this.dragEl_.target=b;this.findCtl_=new tracing.TimelineFindControl;this.findCtl_.controller=new tracing.TimelineFindController;this.importErrorsButton_=this.createImportErrorsButton_();
this.categoryFilterButton_=this.createCategoryFilterButton_();this.categoryFilterButton_.callback=this.updateCategoryFilterFromSettings_.bind(this);this.metadataButton_=this.createMetadataButton_();this.rightControls.appendChild(this.importErrorsButton_);this.rightControls.appendChild(this.categoryFilterButton_);this.rightControls.appendChild(this.metadataButton_);this.rightControls.appendChild(this.findCtl_);this.controlDiv_.appendChild(this.titleEl_);this.controlDiv_.appendChild(this.leftControlsEl_);
this.controlDiv_.appendChild(a);this.controlDiv_.appendChild(this.rightControlsEl_);this.appendChild(this.controlDiv_);this.appendChild(this.timelineContainer_);this.appendChild(this.dragEl_);b.appendChild(this.analysisEl_);this.appendChild(b);this.rightControls.appendChild(this.createHelpButton_());this.onSelectionChangedBoundToThis_=this.onSelectionChanged_.bind(this);document.addEventListener("keypress",this.onKeypress_.bind(this),!0)},createImportErrorsButton_:function(){function a(){c.style.display=
k.model&&k.model.importErrors.length?"":"none"}var b=new tracing.Overlay;b.classList.add("timeline-view-import-errors-overlay");b.autoClose=!0;var c=document.createElement("div");c.className="timeline-button timeline-view-import-errors-button timeline-view-info-button";c.textContent="Import errors!";var d=document.createElement("div");d.className="info-button-text import-errors-dialog-text";var g=document.createElement("div");g.className="info-button-containerimport-errors-dialog";g.textContent="Errors occurred during import:";
g.appendChild(d);b.appendChild(g);var k=this;c.addEventListener("click",function(){b.visible=!0;d.textContent=k.model.importErrors.join("\n")}.bind(this));a();k.addEventListener("modelChange",a);return c},createCategoryFilterButton_:function(){function a(){c.style.display=d.model?"":"none"}var b,c=document.createElement("div");c.className="timeline-button timeline-view-info-button";c.textContent="Categories";c.__defineSetter__("callback",function(a){b=a});var d=this;a();d.addEventListener("modelChange",
a);c.addEventListener("click",function(){var a=new tracing.TimelineCategoryFilterDialog;a.model=d.model;a.settings=d.settings;a.settingUpdatedCallback=b;a.visible=!0}.bind(this));return c},createHelpButton_:function(){var a=new tracing.Overlay;a.classList.add("timeline-view-help-overlay");a.autoClose=!0;a.additionalCloseKeyCodes.push(63);var b=document.createElement("div");b.className="timeline-button timeline-view-help-button";b.textContent="?";var c=document.createElement("div");c.style.whiteSpace=
"pre";c.style.fontFamily="monospace";a.appendChild(c);b.addEventListener("click",function(b){a.visible=!0;c.textContent=this.timeline_?this.timeline_.keyHelp:"No content loaded. For interesting help, load something.";b.stopPropagation();return!1}.bind(this));return b},createMetadataButton_:function(){function a(){c.style.display=k.model&&k.model.metadata.length?"":"none"}var b=new tracing.Overlay;b.classList.add("timeline-view-metadata-overlay");b.autoClose=!0;var c=document.createElement("div");
c.className="timeline-button timeline-view-metadata-button timeline-view-info-button";c.textContent="Metadata";var d=document.createElement("div");d.className="info-button-text metadata-dialog-text";var g=document.createElement("div");g.className="info-button-container metadata-dialog";g.textContent="Metadata Info:";g.appendChild(d);b.appendChild(g);var k=this;c.addEventListener("click",function(){b.visible=!0;var a=[],c=k.model,e;for(e in c.metadata)a.push(JSON.stringify(c.metadata[e].name)+": "+
JSON.stringify(c.metadata[e].value,void 0," "));d.textContent=a.join("\n")}.bind(this));a();k.addEventListener("modelChange",a);return c},get leftControls(){return this.leftControlsEl_},get rightControls(){return this.rightControlsEl_},get title(){return this.titleEl_.textContent.substring(this.titleEl_.textContent.length-2)},set title(a){this.titleEl_.textContent=a+":"},set traceData(a){this.model=new tracing.TimelineModel(a)},get model(){if(this.timeline_)return this.timeline_.model},set model(a){var b=
a!=this.model,c=a&&!a.bounds.isEmpty;b&&(this.timelineContainer_.textContent="",this.timeline_&&(this.timeline_.removeEventListener("selectionChange",this.onSelectionChangedBoundToThis_),this.timeline_.detach(),this.timeline_=void 0,this.findCtl_.controller.timeline=void 0));c&&!this.timeline_&&(this.timeline_=new tracing.Timeline,this.timeline_.focusElement=this.focusElement_?this.focusElement_:this.parentElement,this.timelineContainer_.appendChild(this.timeline_),this.findCtl_.controller.timeline=
this.timeline_,this.timeline_.addEventListener("selectionChange",this.onSelectionChangedBoundToThis_),this.updateCategoryFilterFromSettings_());c&&(this.timeline_.model=a);base.dispatchSimpleEvent(this,"modelChange");if(b)this.onSelectionChanged_()},get timeline(){return this.timeline_},get settings(){this.settings_||(this.settings_=new base.Settings);return this.settings_},set focusElement(a){this.focusElement_=a;this.timeline_&&(this.timeline_.focusElement=a)},get focusElement(){return this.focusElement_?
this.focusElement_:this.parentElement},get isAttachedToDocument_(){for(var a=this;a.parentNode;)a=a.parentNode;return a==this.ownerDocument},get listenToKeys_(){if(this.isAttachedToDocument_)return!this.focusElement_?!0:0<=this.focusElement.tabIndex?document.activeElement==this.focusElement:!0},onKeypress_:function(a){this.listenToKeys_&&(47==event.keyCode?(this.findCtl_.focus(),event.preventDefault()):63==a.keyCode&&(this.querySelector(".timeline-view-help-button").click(),a.preventDefault()))},
beginFind:function(){if(!this.findInProgress_){this.findInProgress_=!0;var a=tracing.TimelineFindControl();a.controller=new tracing.TimelineFindController;a.controller.timeline=this.timeline;a.visible=!0;a.addEventListener("close",function(){this.findInProgress_=!1}.bind(this));a.addEventListener("findNext",function(){});a.addEventListener("findPrevious",function(){})}},onSelectionChanged_:function(){var a=this.timelineContainer_.scrollTop,b=this.timeline_?this.timeline_.selection:new tracing.TimelineSelection;
this.analysisEl_.selection=b;this.timelineContainer_.scrollTop=a},updateCategoryFilterFromSettings_:function(){if(this.timeline_){for(var a=this.settings.keys("categories"),b=[],c=0;c<a.length;c++)"false"==this.settings.get(a[c],"true","categories")&&b.push(a[c]);this.timeline_.categoryFilter=new tracing.TimelineCategoryFilter(b)}}};var c=base.ui.define("div");c.prototype={__proto__:HTMLDivElement.prototype,decorate:function(){this.className="timeline-drag-handle";this.lastMousePosY=0;this.dragAnalysis=
this.dragAnalysis.bind(this);this.onMouseUp=this.onMouseUp.bind(this);this.addEventListener("mousedown",this.onMouseDown)},dragAnalysis:function(a){var b=this.lastMousePosY-a.clientY;this.target.style.height||(this.target.style.height=window.getComputedStyle(this.target).height);this.target.style.height=parseInt(this.target.style.height)+b+"px";this.lastMousePosY=a.clientY},onMouseDown:function(a){this.lastMousePosY=a.clientY;document.addEventListener("mousemove",this.dragAnalysis);document.addEventListener("mouseup",
this.onMouseUp);a.stopPropagation();return!1},onMouseUp:function(){document.removeEventListener("mousemove",this.dragAnalysis);document.removeEventListener("mouseup",this.onMouseUp)}};return{TimelineView:d}});
